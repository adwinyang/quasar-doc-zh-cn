"use strict";(globalThis["webpackChunkquasar_dev"]=globalThis["webpackChunkquasar_dev"]||[]).push([[40442],{40442:(n,s,a)=>{a.r(s),a.d(s,{default:()=>tn});var t=a(83673);const o=(0,t._)("p",null,[(0,t.Uk)("PreFetch 是一项功能("),(0,t._)("strong",null,"只在使用 Quasar CLI 时可用"),(0,t.Uk)(")，它允许Vue Router(定义在"),(0,t._)("code",{class:"doc-token"},"/src/router/routes.js"),(0,t.Uk)(")挑选的组件：")],-1),e=(0,t._)("ul",null,[(0,t._)("li",null,"预先获取数据"),(0,t._)("li",null,"验证路由"),(0,t._)("li",null,"当某些条件不满足时(如用户没有登录)，重定向到另一个路由。"),(0,t._)("li",null,"可以帮助初始化商店的状态")],-1),c=(0,t._)("p",null,"所有上述内容将在实际路由组件呈现之前运行。",-1),p=(0,t._)("p",null,[(0,t._)("strong",null,"它被设计用于所有 Quasar 模式"),(0,t.Uk)("(SPA、PWA、SSR、 Cordova 、Electron)，但它对SSR的构建特别有用。")],-1),k=(0,t._)("pre",{class:"doc-code language-js"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,t._)("span",{class:"token comment"},"// quasar.conf.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token literal-property property"},"preFetch"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token boolean"},"true"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])],-1),l=(0,t._)("div",{class:"doc-note doc-note--warning"},[(0,t._)("p",{class:"doc-note__title"},"WARNING"),(0,t._)("p",null,[(0,t.Uk)("当你使用它来预取数据时，你需要使用Vuex存储，所以当你创建项目时，请确保你的项目文件夹中有"),(0,t._)("code",{class:"doc-token"},"/src/store"),(0,t.Uk)("文件夹，否则就生成一个新项目，并将store文件夹内容复制到你当前的项目中。")])],-1),u=(0,t._)("p",null,[(0,t.Uk)("这个功能对SSR模式特别有用(但不只限于此)。在SSR期间，我们基本上是在渲染我们的应用程序的 “快照”，所以如果应用程序依赖于一些异步数据，"),(0,t._)("strong",null,"那么这些数据需要在我们开始渲染过程之前被预取和解决"),(0,t.Uk)("。")],-1),_=(0,t._)("p",null,"另一个问题是，在客户端，同样的数据需要在我们挂载客户端应用程序之前可用–否则，客户端应用程序将使用不同的状态进行渲染，激活就会失败。",-1),r=(0,t._)("p",null,"为了解决这个问题，获取的数据需要存在于视图组件之外，在一个专门的数据存储或 “状态容器” 中。在服务器上，我们可以在渲染前预取并将数据填充到存储中。在我们加载应用程序之前，客户端的存储将直接获取服务器的状态。",-1),i=(0,t._)("p",null,[(0,t._)("code",{class:"doc-token"},"preFetch"),(0,t.Uk)("钩子(在接下来的章节中描述)是由访问的路由决定的–这也决定了哪些组件被渲染。事实上，一个给定的路由所需要的数据也是在该路由渲染的组件所需要的数据。**所以很自然地(也是必须的)将钩子逻辑只放在路由组件内。**这包括"),(0,t._)("code",{class:"doc-token"},"/src/App.vue"),(0,t.Uk)("，在这种情况下，它只在应用程序启动时运行一次。")],-1),d=(0,t._)("p",null,[(0,t.Uk)("让我们举个示例，以了解钩子何时被调用。假设我们有这些路由，并且我们为所有这些组件写了"),(0,t._)("code",{class:"doc-token"},"preFetch"),(0,t.Uk)("钩子：")],-1),U=(0,t._)("pre",{class:"doc-code language-js"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,t._)("span",{class:"token comment"},"// 路由"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token literal-property property"},"path"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'/'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token literal-property property"},"component"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" LandingPage\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token literal-property property"},"path"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'/shop'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token literal-property property"},"component"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" ShopLayout"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token literal-property property"},"children"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token literal-property property"},"path"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'all'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token literal-property property"},"component"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" ShopAll\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token literal-property property"},"path"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'new'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token literal-property property"},"component"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" ShopNew\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token literal-property property"},"path"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'product/:name'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token literal-property property"},"component"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" ShopProduct"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token literal-property property"},"children"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          "),(0,t._)("span",{class:"token literal-property property"},"path"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'overview'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n          "),(0,t._)("span",{class:"token literal-property property"},"component"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" ShopProductOverview\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n")])],-1),g=(0,t._)("p",null,"现在，让我们看看当用户按照下面指定的顺序访问这些路线时，钩子是如何被调用的，一个接一个。",-1),m=(0,t._)("thead",null,[(0,t._)("tr",null,[(0,t._)("th",{class:"text-left"},"被访问的路线"),(0,t._)("th",{class:"text-left"},"钩子被调用的情况"),(0,t._)("th",{class:"text-left"},"观察结果")])],-1),h=(0,t._)("tbody",null,[(0,t._)("tr",null,[(0,t._)("td",null,[(0,t._)("code",{class:"doc-token"},"/")]),(0,t._)("td",null,"App.vue then LandingPage"),(0,t._)("td",null,"App.vue钩子从我们的应用启动后就被调用了。")]),(0,t._)("tr",null,[(0,t._)("td",null,[(0,t._)("code",{class:"doc-token"},"/shop/all")]),(0,t._)("td",null,"ShopLayout then ShopAll"),(0,t._)("td",null,"- -")]),(0,t._)("tr",null,[(0,t._)("td",null,[(0,t._)("code",{class:"doc-token"},"/shop/new")]),(0,t._)("td",null,"ShopNew"),(0,t._)("td",null,"ShopNew是ShopLayout的一个子节点，而ShopLayout已经被渲染了，所以ShopLayout不会被再次调用。")]),(0,t._)("tr",null,[(0,t._)("td",null,[(0,t._)("code",{class:"doc-token"},"/shop/product/pyjamas")]),(0,t._)("td",null,"ShopProduct"),(0,t._)("td",null,"-")]),(0,t._)("tr",null,[(0,t._)("td",null,[(0,t._)("code",{class:"doc-token"},"/shop/product/shoes")]),(0,t._)("td",null,"ShopProduct"),(0,t._)("td",null,"Quasar注意到同一个组件已经被渲染了，但是路由已经被更新，而且它有路由参数，所以它再次调用钩子。")]),(0,t._)("tr",null,[(0,t._)("td",null,[(0,t._)("code",{class:"doc-token"},"/shop/product/shoes/overview")]),(0,t._)("td",null,"ShopProduct then ShopProductOverview"),(0,t._)("td",null,"ShopProduct有路由参数，所以它被调用，尽管它已经被渲染了。")]),(0,t._)("tr",null,[(0,t._)("td",null,[(0,t._)("code",{class:"doc-token"},"/")]),(0,t._)("td",null,"LandingPage"),(0,t._)("td",null,"-")])],-1),y=(0,t._)("p",null,[(0,t.Uk)("这个钩子被定义为我们路由组件上的一个自定义静态函数，叫做"),(0,t._)("code",{class:"doc-token"},"preFetch"),(0,t.Uk)("。注意，因为这个函数将在组件实例化之前被调用，所以它不能访问"),(0,t._)("code",{class:"doc-token"},"this"),(0,t.Uk)("。")],-1),f=(0,t._)("pre",{class:"doc-code language-html"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-html"},[(0,t._)("span",{class:"token comment"},"\x3c!-- 一些 .vue 组件用作路由 --\x3e"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"<"),(0,t.Uk)("template")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"<"),(0,t.Uk)("div")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("{{ item.title }}"),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"</"),(0,t.Uk)("div")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n"),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"</"),(0,t.Uk)("template")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"<"),(0,t.Uk)("script")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t._)("span",{class:"token script"},[(0,t._)("span",{class:"token language-javascript"},[(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" useStore "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'vuex'"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 我们的钩子在这里"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"preFetch"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" store"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" currentRoute"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" previousRoute"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" redirect"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" ssrContext"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" urlPath"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" publicPath "),(0,t._)("span",{class:"token punctuation"},"}")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 获取数据，验证路线，并可选择重定向到其他路线..."),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token comment"},"// ssrContext只在SSR模式下的服务器端可用。"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token comment"},'// 这里没有访问 "这个 "的权限'),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token comment"},"// 如果你正在运行一个异步作业，返回一个Promise。"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 示例："),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(" store"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"dispatch"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'fetchItem'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" currentRoute"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("params"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("id"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n\n  "),(0,t._)("span",{class:"token function"},"setup"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" $store "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"useStore"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token comment"},"// 从商店状态显示项目。"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" item "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"computed"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(" $store"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("items"),(0,t._)("span",{class:"token punctuation"},"["),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("$route"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("params"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("id"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" item "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"</"),(0,t.Uk)("script")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n")])],-1),w=(0,t._)("p",null,[(0,t.Uk)("如果你使用的是"),(0,t._)("code",{class:"doc-token"},"<script setup>"),(0,t.Uk)("，那么就在它之外添加一个"),(0,t._)("code",{class:"doc-token"},"<script>"),(0,t.Uk)("部分，它只是用preFetch()方法返回一个对象：")],-1),v=(0,t._)("pre",{class:"doc-code language-html"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-html"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"<"),(0,t.Uk)("script")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t._)("span",{class:"token script"},[(0,t._)("span",{class:"token language-javascript"},[(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"preFetch"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    console"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"log"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'running preFetch'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"</"),(0,t.Uk)("script")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n\n\n"),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"<"),(0,t.Uk)("script")]),(0,t.Uk)(),(0,t._)("span",{class:"token attr-name"},"setup"),(0,t._)("span",{class:"token punctuation"},">")]),(0,t._)("span",{class:"token script"},[(0,t._)("span",{class:"token language-javascript"},[(0,t._)("span",{class:"token operator"},"..."),(0,t._)("span",{class:"token punctuation"},".")])]),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"</"),(0,t.Uk)("script")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n")])],-1),S={class:"doc-note doc-note--tip"},x=(0,t._)("p",{class:"doc-note__title"},"TIP",-1),j=(0,t.Uk)("如果你正在开发一个SSR应用程序，那么你可以看看"),b=(0,t.Uk)("ssrContext"),C=(0,t.Uk)(" 对象，它被提供到服务器端。"),F=(0,t._)("pre",{class:"doc-code language-js"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,t._)("span",{class:"token comment"},"// 相关的行动为承诺的示例"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token comment"},"// ..."),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token literal-property property"},"actions"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"fetchItem"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" commit "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" id")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(" axiosInstance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"get"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("url"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" id"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"then"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" data "),(0,t._)("span",{class:"token punctuation"},"}")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token function"},"commit"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'mutation'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" data"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token comment"},"// ..."),(0,t.Uk)("\n")])],-1),P=(0,t._)("p",null,"下面是一个在某些情况下重定向用户的示例，比如当他们试图访问一个只有通过认证的用户才能看到的页面时。",-1),L=(0,t._)("pre",{class:"doc-code language-js"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,t._)("span",{class:"token comment"},"// 我们在这里假设我们已经写了认证逻辑"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token comment"},"// 在Vuex商店中，所以只作为一个高层次的示例。"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token function"},"preFetch"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" store"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" redirect "),(0,t._)("span",{class:"token punctuation"},"}")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token operator"},"!"),(0,t.Uk)("store"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("authenticated"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"redirect"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t._)("span",{class:"token literal-property property"},"path"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'/login'"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])],-1),I=(0,t._)("p",null,[(0,t.Uk)("如果"),(0,t._)("code",{class:"doc-token"},"redirect(false)"),(0,t.Uk)("被调用(只在客户端支持！)，它将中止当前的路线导航。请注意，如果你在"),(0,t._)("code",{class:"doc-token"},"src/App.vue"),(0,t.Uk)("中这样使用它，它将停止应用程序的启动，这是不可取的。")],-1),R=(0,t._)("p",null,[(0,t._)("code",{class:"doc-token"},"redirect()"),(0,t.Uk)("方法需要一个Vue Router位置对象。")],-1),q=(0,t._)("p",null,[(0,t._)("code",{class:"doc-token"},"preFetch"),(0,t.Uk)("钩子只运行一次，当应用程序启动时，所以你可以利用这个机会来初始化Vuex商店。")],-1),H=(0,t._)("pre",{class:"doc-code language-js"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,t._)("span",{class:"token comment"},"// 呼叫中心"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// ..."),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"preFetch"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" store "),(0,t._)("span",{class:"token punctuation"},"}")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 在这里初始化存储的东西"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])],-1),Q=(0,t._)("p",null,"在一个大型的应用程序中，你的Vuex商店可能会被分割成多个模块。当然，也可以将这些模块的代码分割成相应的路由组件块。假设我们有以下的商店模块：",-1),A=(0,t._)("pre",{class:"doc-code language-js"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,t._)("span",{class:"token comment"},"// src/store/foo.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token comment"},"// 我们已经把所有的东西都合并到一个文件里。"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token comment"},"// 一个初始化的 Quasar 项目将Vuex模块的每一个组件分割开来"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token comment"},"// 到不同的文件中，但为了这个示例的目的"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token comment"},"// 在文档中，我们把这个模块显示为一个单独的文件"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token literal-property property"},"namespaced"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token boolean"},"true"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 重要的是：状态必须是一个函数，这样模块就可以"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 多次实例化"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function-variable function"},"state"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token literal-property property"},"count"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"0"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token literal-property property"},"actions"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function-variable function"},"inc"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" commit "),(0,t._)("span",{class:"token punctuation"},"}")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"commit"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'inc'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token literal-property property"},"mutations"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function-variable function"},"inc"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token parameter"},"state"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(" state"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("count"),(0,t._)("span",{class:"token operator"},"++"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])],-1),M=(0,t._)("p",null,[(0,t.Uk)("现在，我们可以使用"),(0,t._)("code",{class:"doc-token"},"store.registerModule()"),(0,t.Uk)("在路由组件的"),(0,t._)("code",{class:"doc-token"},"preFetch()"),(0,t.Uk)("钩中懒散地注册这个模块。")],-1),T=(0,t._)("pre",{class:"doc-code language-html"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-html"},[(0,t.Uk)("// 在一个路由组件内\n"),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"<"),(0,t.Uk)("template")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"<"),(0,t.Uk)("div")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("{{ fooCount }}"),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"</"),(0,t.Uk)("div")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n"),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"</"),(0,t.Uk)("template")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"<"),(0,t.Uk)("script")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t._)("span",{class:"token script"},[(0,t._)("span",{class:"token language-javascript"},[(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" useStore "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'vuex'"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" onMounted"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" onUnmounted "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'vue'"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token comment"},"// 在这里导入模块，而不是在`src/store/index.js`中。"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(" fooStoreModule "),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'store/foo'"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"preFetch"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" store "),(0,t._)("span",{class:"token punctuation"},"}")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    store"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"registerModule"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'foo'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" fooStoreModule"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(" store"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"dispatch"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'foo/inc'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n\n  "),(0,t._)("span",{class:"token function"},"setup"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" $store "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"useStore"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token function"},"onMounted"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token comment"},"// 如果是从服务器上注入的，则保留之前的状态"),(0,t.Uk)("\n      $store"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"registerModule"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'foo'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" fooStoreModule"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t._)("span",{class:"token literal-property property"},"preserveState"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token boolean"},"true"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token function"},"onUnmounted"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token comment"},"// 重要提示：避免在客户端重复注册模块。"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token comment"},"// 当路线被多次访问时。"),(0,t.Uk)("\n      $store"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"unregisterModule"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'foo'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" fooCount "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"computed"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(" $store"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("foo"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("count\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      fooCount\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"</"),(0,t.Uk)("script")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n")])],-1),V=(0,t._)("p",null,"还要注意的是，由于该模块现在是路由组件的一个依赖项，它将被Webpack移到路由组件的异步块中。",-1),W=(0,t._)("div",{class:"doc-note doc-note--warning"},[(0,t._)("p",{class:"doc-note__title"},"WARNING"),(0,t._)("p",null,[(0,t.Uk)("不要忘记为"),(0,t._)("code",{class:"doc-token"},"registerModule"),(0,t.Uk)("使用"),(0,t._)("code",{class:"doc-token"},"preserveState: true"),(0,t.Uk)("选项，这样我们就可以保留服务器注入的状态。")])],-1),N=(0,t._)("p",null,[(0,t.Uk)("你可以使用"),(0,t._)("code",{class:"doc-token"},"preFetch"),(0,t.Uk)("帮助器来提示存储参数的类型(否则会有一个"),(0,t._)("code",{class:"doc-token"},"any"),(0,t.Uk)("类型)。")],-1),$=(0,t._)("pre",{class:"doc-code language-js"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" preFetch "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'quasar/wrappers'"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" Store "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'vuex'"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"interface"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},"StateInterface"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// ..."),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token literal-property property"},"preFetch"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" preFetch"),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("StateInterface"),(0,t._)("span",{class:"token operator"},">"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" store "),(0,t._)("span",{class:"token punctuation"},"}")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 对你新输入的商店参数做一些事情"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])],-1),B=(0,t._)("div",{class:"doc-note doc-note--tip"},[(0,t._)("p",{class:"doc-note__title"},"TIP"),(0,t._)("p",null,[(0,t.Uk)("这只对键入"),(0,t._)("code",{class:"doc-token"},"store"),(0,t.Uk)("参数有用，其他参数即使在使用普通语法时也会自动键入。")])],-1),D=(0,t._)("p",null,"一个好的用户体验包括在用户等待页面准备好的时候，通知他/她有东西正在后台处理。 Quasar CLI 为此提供了两个开箱即用的选项。",-1),E=(0,t.Uk)("当你把Quasar "),G=(0,t.Uk)("LoadingBar"),O=(0,t.Uk)("插件添加到你的应用程序中时，Quasar CLI 将在运行preFetch钩子时默认使用它。"),Z=(0,t.Uk)("也有可能使用Quasar "),z=(0,t.Uk)("Loading"),J=(0,t.Uk)(" 插件。下面是一个示例："),K=(0,t._)("pre",{class:"doc-code language-js"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,t._)("span",{class:"token comment"},"// .vue 路由组件"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" Loading "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'quasar'"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// ..."),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"preFetch"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t._)("span",{class:"token comment"},"/* ... */"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    Loading"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"show"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},"Promise"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"resolve"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token comment"},"// 在这里做一些异步的事情"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token comment"},'// 然后调用 "resolve()"'),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"then"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      Loading"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"hide"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])],-1);function X(n,s,a,X,Y,nn){const sn=(0,t.up)("q-markup-table"),an=(0,t.up)("doc-link"),tn=(0,t.up)("doc-page");return(0,t.wg)(),(0,t.j4)(tn,{"meta-title":X.metaTitle,title:"预取功能",related:X.related,nav:X.nav,toc:X.toc,"meta-desc":X.metaDesc},{default:(0,t.w5)((()=>[o,e,c,p,(0,t._)("h2",{id:"安装",class:"doc-heading doc-h2",onClick:s[0]||(s[0]=n=>X.copyHeading("安装"))},"安装"),k,l,(0,t._)("h2",{id:"prefetch如何帮助ssr模式",class:"doc-heading doc-h2",onClick:s[1]||(s[1]=n=>X.copyHeading("prefetch如何帮助ssr模式"))},"PreFetch如何帮助SSR模式"),u,_,r,(0,t._)("h2",{id:"当-prefetch-被激活时",class:"doc-heading doc-h2",onClick:s[2]||(s[2]=n=>X.copyHeading("当-prefetch-被激活时"))},"当 PreFetch 被激活时"),i,d,U,g,(0,t.Wm)(sn,{"wrap-cells":!0,flat:!0,bordered:!0,style:{width:"fit-content","max-width":"100%"}},{default:(0,t.w5)((()=>[m,h])),_:1}),(0,t._)("h2",{id:"使用方法",class:"doc-heading doc-h2",onClick:s[3]||(s[3]=n=>X.copyHeading("使用方法"))},"使用方法"),y,f,w,v,(0,t._)("div",S,[x,(0,t._)("p",null,[j,(0,t.Wm)(an,{to:"/quasar-cli/developing-ssr/ssr-context"},{default:(0,t.w5)((()=>[b])),_:1}),C])]),F,(0,t._)("h3",{id:"重定向实例",class:"doc-heading doc-h3",onClick:s[4]||(s[4]=n=>X.copyHeading("重定向实例"))},"重定向实例"),P,L,I,R,(0,t._)("h3",{id:"使用prefetch来初始化商店",class:"doc-heading doc-h3",onClick:s[5]||(s[5]=n=>X.copyHeading("使用prefetch来初始化商店"))},"使用preFetch来初始化商店"),q,H,(0,t._)("h3",{id:"存储代码拆分",class:"doc-heading doc-h3",onClick:s[6]||(s[6]=n=>X.copyHeading("存储代码拆分"))},"存储代码拆分"),Q,A,M,T,V,W,(0,t._)("h3",{id:"使用typescript的用法",class:"doc-heading doc-h3",onClick:s[7]||(s[7]=n=>X.copyHeading("使用typescript的用法"))},"使用TypeScript的用法"),N,$,B,(0,t._)("h2",{id:"加载状态",class:"doc-heading doc-h2",onClick:s[8]||(s[8]=n=>X.copyHeading("加载状态"))},"加载状态"),D,(0,t._)("h3",{id:"loadingbar",class:"doc-heading doc-h3",onClick:s[9]||(s[9]=n=>X.copyHeading("loadingbar"))},"LoadingBar"),(0,t._)("p",null,[E,(0,t.Wm)(an,{to:"/quasar-plugins/loading-bar"},{default:(0,t.w5)((()=>[G])),_:1}),O]),(0,t._)("h3",{id:"加载",class:"doc-heading doc-h3",onClick:s[10]||(s[10]=n=>X.copyHeading("加载"))},"加载"),(0,t._)("p",null,[Z,(0,t.Wm)(an,{to:"/quasar-plugins/loading"},{default:(0,t.w5)((()=>[z])),_:1}),J]),K])),_:1},8,["meta-title","related","nav","toc","meta-desc"])}var Y=a(17536);const nn={name:"DocMarkdownPage",setup(){return{metaTitle:"预取功能",metaDesc:"如何在 Quasar 应用中预取数据并初始化你的Vuex商店，验证路由并重定向到另一个页面。",related:[{name:"quasar.conf.js",category:"Quasar CLI",path:"/quasar-cli/quasar-conf-js"}],nav:[{name:"启动文件",category:"Quasar CLI",path:"/quasar-cli/boot-files",dir:"left"},{name:"API 代理",category:"Quasar CLI",path:"/quasar-cli/api-proxying",dir:"right"}],toc:[{id:"安装",title:"安装"},{id:"prefetch如何帮助ssr模式",title:"PreFetch如何帮助SSR模式"},{id:"当-prefetch-被激活时",title:"当 PreFetch 被激活时"},{id:"使用方法",title:"使用方法"},{id:"重定向实例",title:"重定向实例",sub:!0},{id:"使用prefetch来初始化商店",title:"使用preFetch来初始化商店",sub:!0},{id:"存储代码拆分",title:"存储代码拆分",sub:!0},{id:"使用typescript的用法",title:"使用TypeScript的用法",sub:!0},{id:"加载状态",title:"加载状态"},{id:"loadingbar",title:"LoadingBar",sub:!0},{id:"加载",title:"加载",sub:!0}],copyHeading:Y.Et}}};var sn=a(74260);const an=(0,sn.Z)(nn,[["render",X]]),tn=an}}]);