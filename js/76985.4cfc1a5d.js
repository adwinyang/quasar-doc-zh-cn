"use strict";(globalThis["webpackChunkquasar_dev"]=globalThis["webpackChunkquasar_dev"]||[]).push([[76985],{76985:(e,s,a)=>{a.r(s),a.d(s,{default:()=>H});var t=a(83673);const n=(0,t._)("p",null,[(0,t.Uk)("当作为SPA或PWA进行部署时，由 Quasar CLI 生成的distributables文件夹可以由静态Web服务器提供。然而，在SSR(服务器端渲染)构建中，情况就不是这样了。在这种情况下，你的 distributables 也包含你的生产网络服务器–可以从"),(0,t._)("code",{class:"doc-token"},"/src-ssr"),(0,t.Uk)("中进行调整。")],-1),r=(0,t.Uk)("默认情况下，SSR可分发文件使用"),l=(0,t.Uk)("Express"),o=(0,t.Uk)(" ，但你可以用你选择的webserver来替换它。"),c=(0,t.Uk)("Serverless "),p=(0,t.Uk)("如果你要部署到无服务器服务，那么请阅读"),d=(0,t.Uk)("SSR Production Export"),i=(0,t.Uk)(" 关于如何准备的内容。"),u=(0,t._)("p",null,[(0,t.Uk)("在SSR模式下构建你的应用程序("),(0,t._)("code",{class:"doc-token"},"$ quasar build -m ssr"),(0,t.Uk)(")后，生成的文件夹包含了一个独立的webserver，并为SSR服务进行了调整。")],-1),k=(0,t._)("p",null,[(0,t.Uk)("你会注意到它包含一个"),(0,t._)("code",{class:"doc-token"},"package.json"),(0,t.Uk)("文件。它有一个npm脚本，叫做 “start”。")],-1),_=(0,t._)("pre",{class:"doc-code language-js"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,t._)("span",{class:"token string-property property"},'"scripts"'),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token string-property property"},'"start"'),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},'"node index.js"'),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])],-1),g=(0,t._)("p",null,[(0,t.Uk)("因此，你在部署时需要做的是把这个distributables文件夹复制到你的服务器上，yarn/npm安装其中的依赖项，然后运行"),(0,t._)("code",{class:"doc-token"},"$ yarn start"),(0,t.Uk)("。这就启动了网络服务器，并开始监听连接。")],-1),U=(0,t._)("div",{class:"doc-note doc-note--tip"},[(0,t._)("p",{class:"doc-note__title"},"TIP"),(0,t._)("p",null,[(0,t.Uk)("构建应用程序后生成的distributables文件夹是独立的。它不需要项目文件夹的其他部分来工作，也不依赖于"),(0,t._)("code",{class:"doc-token"},"@quasar/cli"),(0,t.Uk)("的安装。")])],-1),v=(0,t.Uk)("默认情况下，Webserver只运行在服务器的一个可用内核上。你可以做的是让它使用所有内核。这方面有一个解决方案。"),S=(0,t.Uk)("PM2"),m=(0,t.Uk)(" 。"),h=(0,t._)("p",null,"在你的服务器上安装PM2后，你的npm启动脚本可以改成这样。",-1),b=(0,t._)("pre",{class:"doc-code language-js"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,t._)("span",{class:"token string-property property"},'"scripts"'),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token string-property property"},'"start"'),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},'"pm2 start index.js"'),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])],-1),y=(0,t.Uk)("你可以使用"),w=(0,t.Uk)("Cleavr"),C=(0,t.Uk)(" 将Quasar SSR应用程序部署到几个流行的VPS供应商。Cleavr 会自动为你的应用程序设置启用集群模式的PM2。"),R=(0,t._)("p",null,[(0,t.Uk)("在Cleavr中添加一个新的"),(0,t._)("strong",null,"NodeJS SSR"),(0,t.Uk)("站点，然后用以下方式配置网络应用程序设置。")],-1),j=(0,t._)("ul",null,[(0,t._)("li",null,[(0,t._)("strong",null,"输入点："),(0,t.Uk)(" index.js")]),(0,t._)("li",null,[(0,t._)("strong",null,"构建命令："),(0,t.Uk)(" npx quasar build --mode ssr")]),(0,t._)("li",null,[(0,t._)("strong",null,"工件路径："),(0,t.Uk)(" dist/ssr")])],-1);function q(e,s,a,q,P,W){const f=(0,t.up)("doc-link"),x=(0,t.up)("q-badge"),H=(0,t.up)("doc-page");return(0,t.wg)(),(0,t.j4)(H,{"meta-title":q.metaTitle,title:"部署SSR",nav:q.nav,toc:q.toc,"meta-desc":q.metaDesc},{default:(0,t.w5)((()=>[n,(0,t._)("p",null,[r,(0,t.Wm)(f,{to:"https://expressjs.com/"},{default:(0,t.w5)((()=>[l])),_:1}),o]),(0,t._)("h2",{id:"serverless",class:"doc-heading doc-h2",onClick:s[0]||(s[0]=e=>q.copyHeading("serverless"))},[c,(0,t.Wm)(x,{align:"top",color:"brand-primary",label:"@quasar/app v3.2+"})]),(0,t._)("p",null,[p,(0,t.Wm)(f,{to:"/quasar-cli/developing-ssr/ssr-production-export"},{default:(0,t.w5)((()=>[d])),_:1}),i]),(0,t._)("h2",{id:"分布式文件夹",class:"doc-heading doc-h2",onClick:s[1]||(s[1]=e=>q.copyHeading("分布式文件夹"))},"分布式文件夹"),u,k,_,g,U,(0,t._)("h2",{id:"增强性能",class:"doc-heading doc-h2",onClick:s[2]||(s[2]=e=>q.copyHeading("增强性能"))},"增强性能"),(0,t._)("p",null,[v,(0,t.Wm)(f,{to:"http://pm2.keymetrics.io/"},{default:(0,t.w5)((()=>[S])),_:1}),m]),h,b,(0,t._)("h2",{id:"使用-cleavr-进行部署",class:"doc-heading doc-h2",onClick:s[3]||(s[3]=e=>q.copyHeading("使用-cleavr-进行部署"))},"使用 Cleavr 进行部署"),(0,t._)("p",null,[y,(0,t.Wm)(f,{to:"https://cleavr.io"},{default:(0,t.w5)((()=>[w])),_:1}),C]),R,j])),_:1},8,["meta-title","nav","toc","meta-desc"])}var P=a(17536);const W={name:"DocMarkdownPage",setup(){return{metaTitle:"部署SSR",metaDesc:"如何发布 Quasar 服务器端渲染的应用程序。",nav:[{name:"带类型的SSR",category:"开发 SSR",path:"/quasar-cli/developing-ssr/ssr-with-typescript",dir:"left"},{name:"简介",category:"开发PWA",path:"/quasar-cli/developing-pwa/introduction",dir:"right"}],toc:[{id:"serverless",title:"Serverless"},{id:"分布式文件夹",title:"分布式文件夹"},{id:"增强性能",title:"增强性能"},{id:"使用-cleavr-进行部署",title:"使用 Cleavr 进行部署"}],copyHeading:P.Et}}};var f=a(74260);const x=(0,f.Z)(W,[["render",q]]),H=x}}]);