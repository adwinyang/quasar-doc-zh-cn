"use strict";(globalThis["webpackChunkquasar_dev"]=globalThis["webpackChunkquasar_dev"]||[]).push([[43513],{43513:(n,a,s)=>{s.r(a),s.d(a,{default:()=>L});var e=s(83673);const t=(0,e._)("p",null,[(0,e.Uk)("本页面引用到"),(0,e._)("code",{class:"doc-token"},"src/uninstall.js"),(0,e.Uk)("文件，它在应用扩展卸载时被执行。不是所有的应用扩展都需要卸载 — 这是一个可选的步骤。")],-1),o=(0,e._)("p",null,"该文件的基本结构示例。",-1),c=(0,e._)("pre",{class:"doc-code language-js"},[(0,e._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,e.Uk)("module"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function-variable function"},"exports"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"function"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token parameter"},"api"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token comment"},'// "api "对象的属性和方法, 描述如下'),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])],-1),p=(0,e._)("p",null,"包含这个应用扩展的`ext-id’(String)。",-1),i=(0,e._)("p",null,"是一个对象，该对象具有安装此应用扩展时的提示答案。关于提示的更多信息，请查看[Prompts API](/app-extensions/development-guide/prompts-api 。",-1),l=(0,e._)("p",null,[(0,e.Uk)("解析运行此应用扩展所在的应用程序中的路径。无需自行导入"),(0,e._)("code",{class:"doc-token"},"path"),(0,e.Uk)("和解析路径。")],-1),k=(0,e._)("pre",{class:"doc-code language-js"},[(0,e._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,e._)("span",{class:"token comment"},"// 解析为 app 的 root 目录 (根目录)"),(0,e.Uk)("\napi"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("resolve"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"app"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'src/my-file.js'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token comment"},"// 解析为 app 的 root/src 目录"),(0,e.Uk)("\napi"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("resolve"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"src"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'my-file.js'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token comment"},"// 解析为 app 的 root/src-pwa  目录"),(0,e.Uk)("\napi"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("resolve"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"pwa"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'some-file.js'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token comment"},"//  解析为 app 的 root/src-ssr  目录"),(0,e.Uk)("\napi"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("resolve"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"ssr"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'some-file.js'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token comment"},"// 解析为 app 的 roo/src-cordova  目录"),(0,e.Uk)("\napi"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("resolve"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"cordova"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'config.xml'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token comment"},"// 解析为 app 的 roo/electron 目录"),(0,e.Uk)("\napi"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("resolve"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"electron"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'some-file.js'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n")])],-1),u=(0,e._)("p",null,"运行该应用扩展的 app 根目录的完整路径(String)。。",-1),_=(0,e._)("p",null,"通过 semver 条件确定主机应用程序中是否安装了某些包。",-1),r=(0,e._)("p",null,"semver条件示例：`‘1.x || >=2.5.0 || 5.0.0 - 7.2.3’。",-1),d=(0,e._)("pre",{class:"doc-code language-js"},[(0,e._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,e._)("span",{class:"token comment"},"/**\n * @param {string} packageName\n * @param {string} (optional) semverCondition\n * @return {boolean} 包已安装并满足可选的semver条件\n */"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"if"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("api"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"hasPackage"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'vuelidate'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token comment"},"// 嘿，这个应用程序有它(任意版本)。"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"if"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("api"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"hasPackage"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'quasar'"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'^1.0.0'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token comment"},"// 嘿，这个应用程序已经安装了v1版本"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])],-1),g=(0,e._)("p",null,"检查是否安装了另一个应用扩展。",-1),m=(0,e._)("pre",{class:"doc-code language-js"},[(0,e._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,e._)("span",{class:"token comment"},"/**\n * 检查是否安装了另一个应用程序的扩展\n *\n * @param {string} extId\n * @return {boolean} 是否安装了该扩展。\n */"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"if"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("api"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"hasExtension"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("extId"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token comment"},"// 嘿，我们有它了"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])],-1),U=(0,e._)("p",null,"获取主机应用程序包的版本。",-1),h=(0,e._)("pre",{class:"doc-code language-js"},[(0,e._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,e._)("span",{class:"token comment"},"/**\n*param {string} packageName\n* @return {string|undefined} 应用程序包的版本\n  */"),(0,e.Uk)("\n  console"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"log"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)(" api"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"getPackageVersion"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("packageName"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token comment"},"// 输出示例。"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token comment"},"// 1.1.3"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token comment"},"// 未定义 (当软件包未找到时)"),(0,e.Uk)("\n")])],-1),f=(0,e._)("p",null,"从App项目文件夹中删除一个文件或文件夹(App Extension已经安装，不再需要)。",-1),v=(0,e._)("p",null,"要注意这一点，不要删除那些会破坏开发者的应用程序的文件。",-1),x=(0,e._)("p",null,"文件或文件夹的路径需要是相对于项目根文件夹的。",-1),j=(0,e._)("pre",{class:"doc-code language-js"},[(0,e._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,e._)("span",{class:"token comment"},"/**\n  * @param {string} __path\n  */"),(0,e.Uk)("\napi"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"removePath"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'my-folder'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n")])],-1),y=(0,e._)("p",null,"上面的示例从应用程序的根目录删除了 “my-folder”。",-1),P=(0,e._)("p",null,"获取该扩展的内部持久化配置。如果没有，则返回空对象。",-1),C=(0,e._)("pre",{class:"doc-code language-js"},[(0,e._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,e._)("span",{class:"token comment"},"/**\n* @return {object} cfg\n  */"),(0,e.Uk)("\n  api"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"getPersistentConf"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n")])],-1),w=(0,e._)("p",null,"添加一条信息，在App CLI完成卸载App Extension并即将退出时打印。可以多次调用以注册多个退出日志。",-1),H=(0,e._)("pre",{class:"doc-code language-js"},[(0,e._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,e._)("span",{class:"token comment"},"/**\n * @param {string} msg\n */"),(0,e.Uk)("\napi"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"onExitLog"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'感谢使用我的扩展程序'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n")])],-1);function I(n,a,s,I,A,E){const b=(0,e.up)("doc-page");return(0,e.wg)(),(0,e.j4)(b,{"meta-title":I.metaTitle,title:"应用扩展卸载API",nav:I.nav,toc:I.toc,"meta-desc":I.metaDesc},{default:(0,e.w5)((()=>[t,o,c,(0,e._)("h2",{id:"api-extid",class:"doc-heading doc-h2",onClick:a[0]||(a[0]=n=>I.copyHeading("api-extid"))},"api.extId"),p,(0,e._)("h2",{id:"api-prompts",class:"doc-heading doc-h2",onClick:a[1]||(a[1]=n=>I.copyHeading("api-prompts"))},"api.prompts"),i,(0,e._)("h2",{id:"api-resolve",class:"doc-heading doc-h2",onClick:a[2]||(a[2]=n=>I.copyHeading("api-resolve"))},"api.resolve"),l,k,(0,e._)("h2",{id:"api-appdir",class:"doc-heading doc-h2",onClick:a[3]||(a[3]=n=>I.copyHeading("api-appdir"))},"api.appDir"),u,(0,e._)("h2",{id:"api-haspackage",class:"doc-heading doc-h2",onClick:a[4]||(a[4]=n=>I.copyHeading("api-haspackage"))},"api.hasPackage"),_,r,d,(0,e._)("h2",{id:"api-hasextension",class:"doc-heading doc-h2",onClick:a[5]||(a[5]=n=>I.copyHeading("api-hasextension"))},"api.hasExtension"),g,m,(0,e._)("h2",{id:"api-getpackageversion",class:"doc-heading doc-h2",onClick:a[6]||(a[6]=n=>I.copyHeading("api-getpackageversion"))},"api.getPackageVersion"),U,h,(0,e._)("h2",{id:"api-removepath",class:"doc-heading doc-h2",onClick:a[7]||(a[7]=n=>I.copyHeading("api-removepath"))},"api.removePath"),f,v,x,j,y,(0,e._)("h2",{id:"api-getpersistentconf",class:"doc-heading doc-h2",onClick:a[8]||(a[8]=n=>I.copyHeading("api-getpersistentconf"))},"api.getPersistentConf"),P,C,(0,e._)("h2",{id:"api-onexitlog",class:"doc-heading doc-h2",onClick:a[9]||(a[9]=n=>I.copyHeading("api-onexitlog"))},"api.onExitLog"),w,H])),_:1},8,["meta-title","nav","toc","meta-desc"])}var A=s(17536);const E={name:"DocMarkdownPage",setup(){return{metaTitle:"应用扩展卸载API",metaDesc:"Quasar 应用扩展的卸载脚本API。",nav:[{name:"索引 API",category:"开发指南",path:"/app-extensions/development-guide/index-api",dir:"left"},{name:"简介",category:"技巧和窍门",path:"/app-extensions/tips-and-tricks/introduction",dir:"right"}],toc:[{id:"api-extid",title:"api.extId"},{id:"api-prompts",title:"api.prompts"},{id:"api-resolve",title:"api.resolve"},{id:"api-appdir",title:"api.appDir"},{id:"api-haspackage",title:"api.hasPackage"},{id:"api-hasextension",title:"api.hasExtension"},{id:"api-getpackageversion",title:"api.getPackageVersion"},{id:"api-removepath",title:"api.removePath"},{id:"api-getpersistentconf",title:"api.getPersistentConf"},{id:"api-onexitlog",title:"api.onExitLog"}],copyHeading:A.Et}}};var b=s(74260);const D=(0,b.Z)(E,[["render",I]]),L=D}}]);