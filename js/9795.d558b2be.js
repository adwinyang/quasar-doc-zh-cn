"use strict";(globalThis["webpackChunkquasar_dev"]=globalThis["webpackChunkquasar_dev"]||[]).push([[9795],{9795:(n,s,a)=>{a.r(s),a.d(s,{default:()=>pn});var e=a(83673);const o=(0,e._)("p",null,"这是你可以配置一些SSR选项的地方。比如你想让客户端以SPA(单页应用–默认行为)或PWA(渐进式Web应用)的形式接管。",-1),t=(0,e._)("pre",{class:"doc-code language-js"},[(0,e._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,e._)("span",{class:"token keyword"},"return"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token comment"},"// ..."),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token literal-property property"},"ssr"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token literal-property property"},"pwa"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token boolean"},"true"),(0,e._)("span",{class:"token operator"},"/"),(0,e._)("span",{class:"token boolean"},"false"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(),(0,e._)("span",{class:"token comment"},"// 应该由PWA接管（默认值：false），还是仅由SPA接管 ？"),(0,e.Uk)("\n\n    "),(0,e._)("span",{class:"token literal-property property"},"manualStoreHydration"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token boolean"},"true"),(0,e._)("span",{class:"token operator"},"/"),(0,e._)("span",{class:"token boolean"},"false"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token comment"},"// 手动给商店补充水分。"),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token comment"},"// 这一点将在下面的小节中详细说明"),(0,e.Uk)("\n\n    "),(0,e._)("span",{class:"token literal-property property"},"manualPostHydrationTrigger"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token boolean"},"true"),(0,e._)("span",{class:"token operator"},"/"),(0,e._)("span",{class:"token boolean"},"false"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token comment"},"// 在客户端手动触发激活后逻辑。"),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token comment"},"// 这一点将在下面的小节中详细说明"),(0,e.Uk)("\n\n    "),(0,e._)("span",{class:"token literal-property property"},"prodPort"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"3000"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(),(0,e._)("span",{class:"token comment"},"// 生产服务器应该使用的默认端口"),(0,e.Uk)("\n                    "),(0,e._)("span",{class:"token comment"},"// (如果在运行时指定process.env.PORT，则会被取代)"),(0,e.Uk)("\n\n    "),(0,e._)("span",{class:"token literal-property property"},"maxAge"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"1000"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"*"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"60"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"*"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"60"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"*"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"24"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"*"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"30"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token comment"},"// 告诉浏览器服务器上的文件何时应从缓存中过期"),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token comment"},"// (默认值，单位为ms)"),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token comment"},"// 只有在使用server.static()时才有效。"),(0,e.Uk)("\n\n    "),(0,e._)("span",{class:"token comment"},"// SSR中间件文件的列表(src-ssr/middlewares/*)。顺序很重要。"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token literal-property property"},"middlewares"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"["),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token comment"},"// ..."),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token string"},"'render'"),(0,e.Uk)(),(0,e._)("span",{class:"token comment"},"// 不应缺失，且应位于列表的最后。"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"]"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n\n    "),(0,e._)("span",{class:"token comment"},"// 可选；添加/删除/更改属性"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token comment"},"// 生产中生成的软件包.json的"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token function"},"extendPackageJson"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token parameter"},"pkg"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token comment"},"// 直接改变属性的包。"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token comment"},"// 不需要归还任何东西"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n\n    "),(0,e._)("span",{class:"token comment"},"// 可选。"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token comment"},"// 处理Webserver webpack config ONLY"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token comment"},"// 其中包括SSR中间件"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token function"},"extendWebpackWebserver"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token parameter"},"cfg"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token comment"},"// 直接改变cfg的props。"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token comment"},"// 不需要归还任何东西"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n\n    "),(0,e._)("span",{class:"token comment"},"// 可选；等同于extendWebpack()，但使用webpack-chain。"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token comment"},"// 处理Webserver webpack config ONLY"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token comment"},"// 其中包括SSR中间件"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token function"},"chainWebpackWebserver"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token parameter"},"chain"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token comment"},"// 链是一个webpack-chain实例"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token comment"},"// 的Webpack配置"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])],-1),c={class:"doc-note"},p=(0,e.Uk)("如果你决定采用PWA客户端接管(**这是个杀手锏)，Quasar CLI PWA模式也将被安装。你可能也想看看"),k=(0,e.Uk)("Quasar PWA"),l=(0,e.Uk)(" 指南。但最重要的是，确保你阅读"),r=(0,e.Uk)("带PWA的SSR"),_=(0,e.Uk)(" 页面。"),u=(0,e._)("p",null,[(0,e.Uk)("在构建时，"),(0,e._)("code",{class:"doc-token"},"extendWebpack()"),(0,e.Uk)("和"),(0,e._)("code",{class:"doc-token"},"chainWebpack()"),(0,e.Uk)("会多收到一个参数(Object)，目前包含"),(0,e._)("code",{class:"doc-token"},"isServer"),(0,e.Uk)("或"),(0,e._)("code",{class:"doc-token"},"isClient"),(0,e.Uk)("的布尔属性，因为会有两个Webpack的构建(一个用于服务器端，一个用于客户端)。")],-1),i=(0,e._)("pre",{class:"doc-code language-js"},[(0,e._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,e._)("span",{class:"token comment"},"// quasar.conf.js"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token literal-property property"},"build"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token function"},"extendWebpack"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token parameter"},[(0,e.Uk)("cfg"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" isServer"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(" isClient "),(0,e._)("span",{class:"token punctuation"},"}")]),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"..."),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])],-1),d=(0,e.Uk)("如果你想了解更多信息，请看这个页面，它详细介绍了"),U=(0,e._)("code",{class:"doc-token"},"quasar.conf.js",-1),m=(0,e.Uk)("文件中的"),g=(0,e.Uk)("处理webpack"),b=(0,e.Uk)(" 。"),f=(0,e._)("p",null,"默认情况下， Quasar CLI 会在客户端对Vuex商店(如果你使用它)进行激活。",-1),y=(0,e.Uk)("然而，如果你希望自己手动进行激活，你需要设置quasar.conf.js > ssr > manualStoreHydration: true。然后你需要自己调用"),S=(0,e._)("code",{class:"doc-token"},"store.replaceState(window.__INITIAL_STATE__)",-1),w=(0,e.Uk)("。一个很好的示例是在"),h=(0,e.Uk)("启动文件"),j=(0,e.Uk)("中进行。"),W=(0,e._)("pre",{class:"doc-code language-js"},[(0,e._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,e._)("span",{class:"token comment"},"// Some_boot_file"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token comment"},"// 请确保配置这个启动文件"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token comment"},"// 只在客户端运行"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token keyword"},"export"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"default"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token parameter"},[(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" store "),(0,e._)("span",{class:"token punctuation"},"}")]),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"=>"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  store"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"replaceState"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("window"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("__INITIAL_STATE__"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])],-1),v=(0,e._)("p",null,[(0,e.Uk)("默认情况下， Quasar CLI 会包装你的App组件，并在这个包装组件被安装时在客户端调用"),(0,e._)("code",{class:"doc-token"},"$q.onSSRHydrated()"),(0,e.Uk)("。这就是客户端接管的时刻。你不需要配置任何东西来实现这一目标。")],-1),x=(0,e._)("p",null,"然而，如果你想覆盖这一时刻的发生，你需要设置quasar.conf.js > ssr > manualPostHydrationTrigger: true。不管你的原因是什么(非常自定义的用例)，这是一个手动触发后激活的示例：",-1),q=(0,e._)("pre",{class:"doc-code language-js"},[(0,e._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,e._)("span",{class:"token comment"},"// App.vue - 组合式 API"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token keyword"},"import"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" onMounted "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"from"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'vue'"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"import"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" useQuasar "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"from"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'quasar'"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"export"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"default"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token comment"},"// ...."),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token function"},"setup"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token comment"},"// ..."),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token keyword"},"const"),(0,e.Uk)(" $q "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"useQuasar"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token function"},"onMounted"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"=>"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      $q"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"onSSRHydrated"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])],-1),P=(0,e._)("pre",{class:"doc-code language-js"},[(0,e._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,e._)("span",{class:"token comment"},"// App.vue - API选项"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"export"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"default"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token function"},"mounted"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("$q"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"onSSRHydrated"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])],-1),R=(0,e._)("p",null,[(0,e.Uk)("将SSR模式添加到 Quasar 项目中意味着将创建一个新的文件夹。"),(0,e._)("code",{class:"doc-token"},"/src-ssr"),(0,e.Uk)("，其中包含SSR特定的文件：")],-1),C=(0,e._)("pre",{class:"doc-code language-bash"},[(0,e._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-bash"},[(0,e._)("span",{class:"token builtin class-name"},"."),(0,e.Uk)("\n└── src-ssr/\n    ├── middlewares/  "),(0,e._)("span",{class:"token comment"},"# SSR middleware files"),(0,e.Uk)("\n    ├── directives/   "),(0,e._)("span",{class:"token comment"},"# SSR transformations for Vue directives"),(0,e.Uk)("\n    └── production-export.js "),(0,e._)("span",{class:"token comment"},"# SSR webserver production export"),(0,e.Uk)("\n")])],-1),A=(0,e._)("p",null,"你可以自由编辑这些文件。这两个文件夹中的每一个都在自己的文档页面中详细说明(查看左侧菜单)。",-1),H=(0,e._)("p",null,"注意几件事。",-1),I=(0,e._)("ol",null,[(0,e._)("li",null,[(0,e._)("p",null,"这些文件在Node上下文中运行(它们不被Babel转译)，所以只使用你的Node版本所支持的ES6特性。(https://node.green/)")]),(0,e._)("li",null,[(0,e._)("p",null,'如果你从node_modules中导入任何东西，那么请确保该包在package.json > "dependencies "中指定，而不是在 "devDependencies "中。')]),(0,e._)("li",null,[(0,e._)("p",null,[(0,e._)("code",{class:"doc-token"},"/src-ssr/middlewares"),(0,e.Uk)("是通过一个单独的Webpack配置建立的。"),(0,e._)("strong",null,"当Quasar App CLI构建你的应用程序时，你会看到它被标记为 “Webserver”。"),(0,e.Uk)(" 你可以通过quasar.conf.js连锁/扩展这些文件的Webpack配置：")])])],-1),Q=(0,e._)("pre",{class:"doc-code language-js"},[(0,e._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,e._)("span",{class:"token keyword"},"return"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token comment"},"// ..."),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token literal-property property"},"ssr"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token comment"},"// ..."),(0,e.Uk)("\n\n    "),(0,e._)("span",{class:"token comment"},"// 可选的；webpack的配置对象"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token comment"},"// 只有Webserver部分(/src-ssr/)。"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token comment"},"// 这是为生产而调用的(不是为开发而调用)。"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token function"},"extendWebpackWebserver"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token parameter"},"cfg"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token comment"},"// 直接改变cfg的props。"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token comment"},"// 不需要归还任何东西"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n\n    "),(0,e._)("span",{class:"token comment"},"// 可选；等同于extendWebpack()，但使用webpack-chain。"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token comment"},"// 只有Webserver部分(/src-ssr/)。"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token comment"},"// 这是为生产而调用的(不是为开发而调用)。"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token function"},"chainWebpackWebserver"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token parameter"},"chain"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token comment"},"// 链是一个webpack-chain实例"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token comment"},"// 的Webpack配置"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])],-1),T={start:"4"},L=(0,e._)("code",{class:"doc-token"},"/src-ssr/production-export.js",-1),E=(0,e.Uk)("文件详见"),N=(0,e.Uk)("SSR Production Export"),O=(0,e.Uk)(" 页面。如果你需要支持无服务器功能，请特别阅读它。"),M=(0,e.Uk)("当你开发SSR而不是SPA时，其中一个主要原因是为了照顾到SEO。通过使用"),D=(0,e.Uk)("Quasar Meta Plugin"),$=(0,e.Uk)(" 来管理搜索引擎所需的动态HTML标记，可以大大改善SEO。"),V=(0,e.Uk)("当在SSR模式下运行时，你的应用程序代码需要是同构的或 “通用的”，这意味着它必须在Node上下文和浏览器中运行。这也适用于你的"),Y=(0,e.Uk)("启动文件"),B=(0,e.Uk)(" 。"),J=(0,e._)("p",null,"然而，在有些情况下，你只想让某些引导文件只在服务器上或只在客户端运行。你可以通过指定来实现这一点：",-1),Z=(0,e._)("pre",{class:"doc-code language-js"},[(0,e._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,e._)("span",{class:"token comment"},"// quasar.conf.js"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"return"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token comment"},"// ..."),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token literal-property property"},"boot"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"["),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token string"},"'some-boot-file'"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(),(0,e._)("span",{class:"token comment"},"// 运行在服务器端和客户端"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(),(0,e._)("span",{class:"token literal-property property"},"path"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'some-other'"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(),(0,e._)("span",{class:"token literal-property property"},"server"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token boolean"},"false"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e._)("span",{class:"token comment"},"// 此引导文件仅嵌入在客户端"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(),(0,e._)("span",{class:"token literal-property property"},"path"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'third'"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(),(0,e._)("span",{class:"token literal-property property"},"client"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token boolean"},"false"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e._)("span",{class:"token comment"},"// 此引导文件仅嵌入在服务器端"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"]"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])],-1),z=(0,e._)("p",null,"不过，只要确保你的应用程序是一致的。",-1),F=(0,e.Uk)("当启动文件在服务器上运行时，你将可以在默认导出的函数上多获得一个参数(称为"),G=(0,e.Uk)("ssrContext"),K=(0,e.Uk)(") :"),X=(0,e._)("pre",{class:"doc-code language-js"},[(0,e._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,e._)("span",{class:"token comment"},"// 一些引导文件"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"export"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"default"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token parameter"},[(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" app"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"..."),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(" ssrContext "),(0,e._)("span",{class:"token punctuation"},"}")]),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"=>"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token comment"},"// 你可以向ssrContext添加props，然后在src/index.template.html中使用它们。"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token comment"},"// 示例 - 假设我们ssrContext.someProp = 'some value'，那么在索引模板中我们可以引用它。"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token comment"},"// {{有些作物}}"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])],-1),nn=(0,e._)("p",null,[(0,e.Uk)("当你在你的"),(0,e._)("code",{class:"doc-token"},"src/index.template.html"),(0,e.Uk)("中添加这样的引用(上面的示例中用括号包围的"),(0,e._)("code",{class:"doc-token"},"someProp"),(0,e.Uk)(")时，确保你告诉 Quasar 它只对SSR构建有效：")],-1),sn=(0,e._)("pre",{class:"doc-code language-html"},[(0,e._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-html"},[(0,e._)("span",{class:"token comment"},"\x3c!-- index.template.html --\x3e"),(0,e.Uk)("\n<% if (ctx.mode.ssr) { %>{{ someProp }} <% } %>\n")])],-1);function an(n,s,a,an,en,on){const tn=(0,e.up)("doc-link"),cn=(0,e.up)("doc-page");return(0,e.wg)(),(0,e.j4)(cn,{"meta-title":an.metaTitle,title:"配置SSR",related:an.related,nav:an.nav,toc:an.toc,"meta-desc":an.metaDesc},{default:(0,e.w5)((()=>[(0,e._)("h2",{id:"quasar-conf-js",class:"doc-heading doc-h2",onClick:s[0]||(s[0]=n=>an.copyHeading("quasar-conf-js"))},"Quasar.conf.js"),o,t,(0,e._)("blockquote",c,[(0,e._)("p",null,[p,(0,e.Wm)(tn,{to:"/quasar-cli/developing-pwa/introduction"},{default:(0,e.w5)((()=>[k])),_:1}),l,(0,e.Wm)(tn,{to:"/quasar-cli/developing-ssr/ssr-with-pwa"},{default:(0,e.w5)((()=>[r])),_:1}),_])]),u,i,(0,e._)("p",null,[d,U,m,(0,e.Wm)(tn,{to:"/quasar-cli/handling-webpack"},{default:(0,e.w5)((()=>[g])),_:1}),b]),(0,e._)("h3",{id:"手动触发商店激活",class:"doc-heading doc-h3",onClick:s[1]||(s[1]=n=>an.copyHeading("手动触发商店激活"))},"手动触发商店激活"),f,(0,e._)("p",null,[y,S,w,(0,e.Wm)(tn,{to:"/quasar-cli/boot-files"},{default:(0,e.w5)((()=>[h])),_:1}),j]),W,(0,e._)("h3",{id:"手动触发后激活",class:"doc-heading doc-h3",onClick:s[2]||(s[2]=n=>an.copyHeading("手动触发后激活"))},"手动触发后激活"),v,x,q,P,(0,e._)("h2",{id:"nodejs-服务器",class:"doc-heading doc-h2",onClick:s[3]||(s[3]=n=>an.copyHeading("nodejs-服务器"))},"Nodejs 服务器"),R,C,A,H,I,Q,(0,e._)("ol",T,[(0,e._)("li",null,[L,E,(0,e.Wm)(tn,{to:"/quasar-cli/developing-ssr/ssr-production-export"},{default:(0,e.w5)((()=>[N])),_:1}),O])]),(0,e._)("h2",{id:"有助于seo",class:"doc-heading doc-h2",onClick:s[4]||(s[4]=n=>an.copyHeading("有助于seo"))},"有助于SEO"),(0,e._)("p",null,[M,(0,e.Wm)(tn,{to:"/quasar-plugins/meta"},{default:(0,e.w5)((()=>[D])),_:1}),$]),(0,e._)("h2",{id:"启动文件",class:"doc-heading doc-h2",onClick:s[5]||(s[5]=n=>an.copyHeading("启动文件"))},"启动文件"),(0,e._)("p",null,[V,(0,e.Wm)(tn,{to:"/quasar-cli/boot-files"},{default:(0,e.w5)((()=>[Y])),_:1}),B]),J,Z,z,(0,e._)("p",null,[F,(0,e.Wm)(tn,{to:"/quasar-cli/developing-ssr/ssr-context"},{default:(0,e.w5)((()=>[G])),_:1}),K]),X,nn,sn])),_:1},8,["meta-title","related","nav","toc","meta-desc"])}var en=a(17536);const on={name:"DocMarkdownPage",setup(){return{metaTitle:"配置SSR",metaDesc:"如何用 Quasar CLI 管理你的服务器端渲染的应用程序。",related:[{name:"quasar.conf.js",category:"Quasar CLI",path:"/quasar-cli/quasar-conf-js"}],nav:[{name:"准备工作",category:"开发 SSR",path:"/quasar-cli/developing-ssr/preparation",dir:"left"},{name:"ssrContext",category:"开发 SSR",path:"/quasar-cli/developing-ssr/ssr-context",dir:"right"}],toc:[{id:"quasar-conf-js",title:"Quasar.conf.js"},{id:"手动触发商店激活",title:"手动触发商店激活",sub:!0},{id:"手动触发后激活",title:"手动触发后激活",sub:!0},{id:"nodejs-服务器",title:"Nodejs 服务器"},{id:"有助于seo",title:"有助于SEO"},{id:"启动文件",title:"启动文件"}],copyHeading:en.Et}}};var tn=a(74260);const cn=(0,tn.Z)(on,[["render",an]]),pn=cn}}]);