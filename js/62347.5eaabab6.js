"use strict";(globalThis["webpackChunkquasar_dev"]=globalThis["webpackChunkquasar_dev"]||[]).push([[62347],{62347:(n,a,t)=>{t.r(a),t.d(a,{default:()=>$});var s=t(83673);const o=(0,s._)("p",null,"Getting to know your users and measuring user behavior is an important step in App Development. Unfortunately, it takes a bit of non-standard work to get Google Analytics to work after wrapping your mobile app with Capacitor. Setting up Google Analytics in a pure web application is quite easy, but Capacitor somehow prevents pageviews and events from being sent to Google Analytics.",-1),e=(0,s._)("p",null,"Follow this guide to implement Google Analytics into your Capacitor powered Quasar App.",-1),c=(0,s.Uk)("You may also want to read this great tutorial: "),p=(0,s.Uk)("Google Tag Manager and Analytics Setup for an SPA Website"),l=(0,s._)("div",{class:"doc-note doc-note--warning"},[(0,s._)("p",{class:"doc-note__title"},"WARNING"),(0,s._)("p",null,[(0,s.Uk)("You’ll need to include a "),(0,s._)("code",{class:"doc-token"},"<script>"),(0,s.Uk)(" tag provided by Google in "),(0,s._)("code",{class:"doc-token"},"/src/index.template.html"),(0,s.Uk)(", which will make your App depend on an Internet connection!")])],-1),i=(0,s.Uk)("Make sure all your routes have a name and path parameter specified. Otherwise, they cannot be posted to the "),u=(0,s._)("code",{class:"doc-token"},"ga.logPage",-1),r=(0,s.Uk)(" function. Please refer to "),k=(0,s.Uk)("Routing"),_=(0,s.Uk)(" for more info on routing."),d=(0,s._)("li",null,"Have Basic knowledge of Google Analytics",-1),g=(0,s.Uk)("Before we can start implementing Google Analytics into your application, you’ll need an account for "),U=(0,s.Uk)("Google Analytics"),y=(0,s.Uk)(" and "),m=(0,s.Uk)("Google Tagmanager"),h=(0,s.Uk)(". So let’s do that first. When you have these accounts, it’s time to configure Tag manager. Follow the steps in this "),w=(0,s.Uk)("Multiminds article"),f=(0,s.Uk)(" to do so."),v={class:"doc-note"},b=(0,s.Uk)("For this guide, we’ll assume you have a fixed sessionId that you send to Google Analytics. Google Analytics uses a sessionId to distinguish different users from each other. If you want to create an anonymous sessionId, see "),A=(0,s.Uk)("Analytics Documentation on user id"),G=(0,s.Uk)("."),I=(0,s.Uk)("Place the Tag Manager snippet into head of your "),j=(0,s._)("code",{class:"doc-token"},"index.html",-1),C=(0,s.Uk)(" file (if you’ve followed the "),W=(0,s.Uk)("Multiminds article"),q=(0,s.Uk)(", you already have this.) Create a new file in your codebase called "),P=(0,s._)("code",{class:"doc-token"},"analytics.js",-1),T=(0,s.Uk)(" with the following contents:"),M=(0,s._)("pre",{class:"doc-code language-javascript"},[(0,s._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-javascript"},[(0,s._)("span",{class:"token keyword"},"export"),(0,s.Uk)(),(0,s._)("span",{class:"token keyword"},"default"),(0,s.Uk)(),(0,s._)("span",{class:"token punctuation"},"{"),(0,s.Uk)("\n  "),(0,s._)("span",{class:"token function"},"logEvent"),(0,s._)("span",{class:"token punctuation"},"("),(0,s._)("span",{class:"token parameter"},[(0,s.Uk)("category"),(0,s._)("span",{class:"token punctuation"},","),(0,s.Uk)(" action"),(0,s._)("span",{class:"token punctuation"},","),(0,s.Uk)(" label"),(0,s._)("span",{class:"token punctuation"},","),(0,s.Uk)(" sessionId "),(0,s._)("span",{class:"token operator"},"="),(0,s.Uk)(),(0,s._)("span",{class:"token keyword"},"null")]),(0,s._)("span",{class:"token punctuation"},")"),(0,s.Uk)(),(0,s._)("span",{class:"token punctuation"},"{"),(0,s.Uk)("\n    window"),(0,s._)("span",{class:"token punctuation"},"."),(0,s.Uk)("dataLayer"),(0,s._)("span",{class:"token punctuation"},"."),(0,s._)("span",{class:"token function"},"push"),(0,s._)("span",{class:"token punctuation"},"("),(0,s._)("span",{class:"token punctuation"},"{"),(0,s.Uk)("\n      "),(0,s._)("span",{class:"token literal-property property"},"appEventCategory"),(0,s._)("span",{class:"token operator"},":"),(0,s.Uk)(" category"),(0,s._)("span",{class:"token punctuation"},","),(0,s.Uk)("\n      "),(0,s._)("span",{class:"token literal-property property"},"appEventAction"),(0,s._)("span",{class:"token operator"},":"),(0,s.Uk)(" action"),(0,s._)("span",{class:"token punctuation"},","),(0,s.Uk)("\n      "),(0,s._)("span",{class:"token literal-property property"},"appEventLabel"),(0,s._)("span",{class:"token operator"},":"),(0,s.Uk)(" label"),(0,s._)("span",{class:"token punctuation"},","),(0,s.Uk)("\n      "),(0,s._)("span",{class:"token literal-property property"},"sessionId"),(0,s._)("span",{class:"token operator"},":"),(0,s.Uk)(" sessionId\n    "),(0,s._)("span",{class:"token punctuation"},"}"),(0,s._)("span",{class:"token punctuation"},")"),(0,s.Uk)("\n    window"),(0,s._)("span",{class:"token punctuation"},"."),(0,s.Uk)("dataLayer"),(0,s._)("span",{class:"token punctuation"},"."),(0,s._)("span",{class:"token function"},"push"),(0,s._)("span",{class:"token punctuation"},"("),(0,s._)("span",{class:"token punctuation"},"{"),(0,s.Uk)(),(0,s._)("span",{class:"token string-property property"},"'event'"),(0,s._)("span",{class:"token operator"},":"),(0,s.Uk)(),(0,s._)("span",{class:"token string"},"'appEvent'"),(0,s.Uk)(),(0,s._)("span",{class:"token punctuation"},"}"),(0,s._)("span",{class:"token punctuation"},")"),(0,s.Uk)("\n  "),(0,s._)("span",{class:"token punctuation"},"}"),(0,s._)("span",{class:"token punctuation"},","),(0,s.Uk)("\n\n  "),(0,s._)("span",{class:"token function"},"logPage"),(0,s._)("span",{class:"token punctuation"},"("),(0,s._)("span",{class:"token parameter"},[(0,s.Uk)("path"),(0,s._)("span",{class:"token punctuation"},","),(0,s.Uk)(" name"),(0,s._)("span",{class:"token punctuation"},","),(0,s.Uk)(" sessionId "),(0,s._)("span",{class:"token operator"},"="),(0,s.Uk)(),(0,s._)("span",{class:"token keyword"},"null")]),(0,s._)("span",{class:"token punctuation"},")"),(0,s.Uk)(),(0,s._)("span",{class:"token punctuation"},"{"),(0,s.Uk)("\n    window"),(0,s._)("span",{class:"token punctuation"},"."),(0,s.Uk)("dataLayer"),(0,s._)("span",{class:"token punctuation"},"."),(0,s._)("span",{class:"token function"},"push"),(0,s._)("span",{class:"token punctuation"},"("),(0,s._)("span",{class:"token punctuation"},"{"),(0,s.Uk)("\n      "),(0,s._)("span",{class:"token literal-property property"},"screenPath"),(0,s._)("span",{class:"token operator"},":"),(0,s.Uk)(" path"),(0,s._)("span",{class:"token punctuation"},","),(0,s.Uk)("\n      "),(0,s._)("span",{class:"token literal-property property"},"screenName"),(0,s._)("span",{class:"token operator"},":"),(0,s.Uk)(" name"),(0,s._)("span",{class:"token punctuation"},","),(0,s.Uk)("\n      "),(0,s._)("span",{class:"token literal-property property"},"sessionId"),(0,s._)("span",{class:"token operator"},":"),(0,s.Uk)(" sessionId\n    "),(0,s._)("span",{class:"token punctuation"},"}"),(0,s._)("span",{class:"token punctuation"},")"),(0,s.Uk)("\n    window"),(0,s._)("span",{class:"token punctuation"},"."),(0,s.Uk)("dataLayer"),(0,s._)("span",{class:"token punctuation"},"."),(0,s._)("span",{class:"token function"},"push"),(0,s._)("span",{class:"token punctuation"},"("),(0,s._)("span",{class:"token punctuation"},"{"),(0,s.Uk)(),(0,s._)("span",{class:"token string-property property"},"'event'"),(0,s._)("span",{class:"token operator"},":"),(0,s.Uk)(),(0,s._)("span",{class:"token string"},"'appScreenView'"),(0,s.Uk)(),(0,s._)("span",{class:"token punctuation"},"}"),(0,s._)("span",{class:"token punctuation"},")"),(0,s.Uk)("\n  "),(0,s._)("span",{class:"token punctuation"},"}"),(0,s.Uk)("\n"),(0,s._)("span",{class:"token punctuation"},"}"),(0,s.Uk)("\n")])],-1),E=(0,s._)("p",null,"To make sure all the pages in your application are automatically posted to Google Analytics, we create an app boot file:",-1),x=(0,s._)("pre",{class:"doc-code language-bash"},[(0,s._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-bash"},[(0,s.Uk)("$ quasar new boot google-analytics "),(0,s._)("span",{class:"token punctuation"},"["),(0,s.Uk)("--format ts"),(0,s._)("span",{class:"token punctuation"},"]"),(0,s.Uk)("\n")])],-1),H=(0,s._)("p",null,[(0,s.Uk)("Then we edit the newly created file: "),(0,s._)("code",{class:"doc-token"},"/src/boot/google-analytics.js"),(0,s.Uk)(":")],-1),D=(0,s._)("pre",{class:"doc-code language-js"},[(0,s._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,s._)("span",{class:"token keyword"},"import"),(0,s.Uk)(" ga "),(0,s._)("span",{class:"token keyword"},"from"),(0,s.Uk)(),(0,s._)("span",{class:"token string"},"'analytics.js'"),(0,s.Uk)("\n\n"),(0,s._)("span",{class:"token keyword"},"export"),(0,s.Uk)(),(0,s._)("span",{class:"token keyword"},"default"),(0,s.Uk)(),(0,s._)("span",{class:"token punctuation"},"("),(0,s._)("span",{class:"token parameter"},[(0,s._)("span",{class:"token punctuation"},"{"),(0,s.Uk)(" router "),(0,s._)("span",{class:"token punctuation"},"}")]),(0,s._)("span",{class:"token punctuation"},")"),(0,s.Uk)(),(0,s._)("span",{class:"token operator"},"=>"),(0,s.Uk)(),(0,s._)("span",{class:"token punctuation"},"{"),(0,s.Uk)("\n  router"),(0,s._)("span",{class:"token punctuation"},"."),(0,s._)("span",{class:"token function"},"afterEach"),(0,s._)("span",{class:"token punctuation"},"("),(0,s._)("span",{class:"token punctuation"},"("),(0,s._)("span",{class:"token parameter"},[(0,s.Uk)("to"),(0,s._)("span",{class:"token punctuation"},","),(0,s.Uk)(),(0,s._)("span",{class:"token keyword"},"from")]),(0,s._)("span",{class:"token punctuation"},")"),(0,s.Uk)(),(0,s._)("span",{class:"token operator"},"=>"),(0,s.Uk)(),(0,s._)("span",{class:"token punctuation"},"{"),(0,s.Uk)("\n    ga"),(0,s._)("span",{class:"token punctuation"},"."),(0,s._)("span",{class:"token function"},"logPage"),(0,s._)("span",{class:"token punctuation"},"("),(0,s.Uk)("to"),(0,s._)("span",{class:"token punctuation"},"."),(0,s.Uk)("path"),(0,s._)("span",{class:"token punctuation"},","),(0,s.Uk)(" to"),(0,s._)("span",{class:"token punctuation"},"."),(0,s.Uk)("name"),(0,s._)("span",{class:"token punctuation"},","),(0,s.Uk)(" sessionId"),(0,s._)("span",{class:"token punctuation"},")"),(0,s.Uk)("\n  "),(0,s._)("span",{class:"token punctuation"},"}"),(0,s._)("span",{class:"token punctuation"},")"),(0,s.Uk)("\n"),(0,s._)("span",{class:"token punctuation"},"}"),(0,s.Uk)("\n")])],-1),L=(0,s._)("p",null,[(0,s.Uk)("Finally we register the app boot file in "),(0,s._)("code",{class:"doc-token"},"/quasar.conf.js"),(0,s.Uk)(". We can do so only for Capacitor wrapped apps if we want:")],-1),S=(0,s._)("pre",{class:"doc-code language-js"},[(0,s._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,s._)("span",{class:"token literal-property property"},"boot"),(0,s._)("span",{class:"token operator"},":"),(0,s.Uk)(),(0,s._)("span",{class:"token punctuation"},"["),(0,s.Uk)("\n  ctx"),(0,s._)("span",{class:"token punctuation"},"."),(0,s.Uk)("mode"),(0,s._)("span",{class:"token punctuation"},"."),(0,s.Uk)("capacitor "),(0,s._)("span",{class:"token operator"},"?"),(0,s.Uk)(),(0,s._)("span",{class:"token string"},"'google-analytics'"),(0,s.Uk)(),(0,s._)("span",{class:"token operator"},":"),(0,s.Uk)(),(0,s._)("span",{class:"token string"},"''"),(0,s.Uk)("\n"),(0,s._)("span",{class:"token punctuation"},"]"),(0,s.Uk)("\n")])],-1),F=(0,s.Uk)("More information about events can be found in the "),N=(0,s.Uk)("Analytics documentation on events"),Y=(0,s.Uk)("."),B=(0,s._)("p",null,"You’ll see the events and pageviews coming in when you run your app. It usually takes around 5 to 10 seconds for a pageview to be registered in the realtime view.",-1);function Q(n,a,t,Q,R,O){const V=(0,s.up)("doc-link"),Z=(0,s.up)("doc-page");return(0,s.wg)(),(0,s.j4)(Z,{"meta-title":Q.metaTitle,title:"Managing Google Analytics","meta-desc":Q.metaDesc},{default:(0,s.w5)((()=>[o,e,(0,s._)("p",null,[c,(0,s.Wm)(V,{to:"https://jannerantala.com/tutorials/quasar-framework-google-tag-manager-and-analytics-setup-for-an-spa-website/"},{default:(0,s.w5)((()=>[p])),_:1})]),l,(0,s._)("h2",{id:"prerequisites",class:"doc-heading doc-h2",onClick:a[0]||(a[0]=n=>Q.copyHeading("prerequisites"))},"Prerequisites"),(0,s._)("ul",null,[(0,s._)("li",null,[i,u,r,(0,s.Wm)(V,{to:"/quasar-cli/routing"},{default:(0,s.w5)((()=>[k])),_:1}),_]),d]),(0,s._)("h2",{id:"preparation",class:"doc-heading doc-h2",onClick:a[1]||(a[1]=n=>Q.copyHeading("preparation"))},"Preparation"),(0,s._)("p",null,[g,(0,s.Wm)(V,{to:"https://analytics.google.com"},{default:(0,s.w5)((()=>[U])),_:1}),y,(0,s.Wm)(V,{to:"https://tagmanager.google.com/"},{default:(0,s.w5)((()=>[m])),_:1}),h,(0,s.Wm)(V,{to:"https://www.multiminds.eu/blog/2016/12/google-analytics-and-tag-manager-with-ionic-and-cordova-apps/"},{default:(0,s.w5)((()=>[w])),_:1}),f]),(0,s._)("h2",{id:"implementing-this-into-application",class:"doc-heading doc-h2",onClick:a[2]||(a[2]=n=>Q.copyHeading("implementing-this-into-application"))},"Implementing this into application"),(0,s._)("blockquote",v,[(0,s._)("p",null,[b,(0,s.Wm)(V,{to:"https://developers.google.com/analytics/devguides/collection/analyticsjs/cookies-user-id"},{default:(0,s.w5)((()=>[A])),_:1}),G])]),(0,s._)("p",null,[I,j,C,(0,s.Wm)(V,{to:"http://www.multiminds.eu/2016/12/06/google-analytics-tag-manager-ionic-cordova/"},{default:(0,s.w5)((()=>[W])),_:1}),q,P,T]),M,E,x,H,D,L,S,(0,s._)("p",null,[F,(0,s.Wm)(V,{to:"https://developers.google.com/analytics/devguides/collection/analyticsjs/events"},{default:(0,s.w5)((()=>[N])),_:1}),Y]),B])),_:1},8,["meta-title","meta-desc"])}var R=t(17536);const O={name:"DocMarkdownPage",setup(){return{metaTitle:"Managing Google Analytics",metaDesc:"How to use analytics in a Quasar hybrid mobile app with Capacitor.",copyHeading:R.Et}}};var V=t(74260);const Z=(0,V.Z)(O,[["render",Q]]),$=Z}}]);