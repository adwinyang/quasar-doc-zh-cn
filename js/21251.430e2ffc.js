"use strict";(globalThis["webpackChunkquasar_dev"]=globalThis["webpackChunkquasar_dev"]||[]).push([[21251],{21251:(n,a,s)=>{s.r(a),s.d(a,{default:()=>y});var t=s(83673);const o=(0,t._)("p",null,[(0,t._)("code",{class:"doc-token"},"src-bex/js/dom-hooks.js"),(0,t.Uk)("是一个javascript文件，它被 Quasar 自动注入到底层网页中，但与所有其他钩子文件一样，可以通过访问桥接。")],-1),e=(0,t._)("pre",{class:"doc-code language-js"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"attachDomHooks"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"bridge"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])],-1),p=(0,t._)("p",null,"如果你发现自己需要将一个JS文件注入到你的底层网页中，你可以使用dom钩子来代替，因为这意味着你可以在BEX中保持这种通信链。",-1),c=(0,t._)("p",null,"例如，假设你想写一个BEX来检测一个 Quasar 应用程序是否在页面上运行，唯一的方法就是在网页的上下文中运行一些javascript。",-1),k=(0,t._)("pre",{class:"doc-code language-js"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,t._)("span",{class:"token comment"},"// detect-quasar.js:"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"initQuasar"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("bridge"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" quasarInstance")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  bridge"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"send"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'quasar.detect'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token literal-property property"},"version"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" quasarInstance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("version"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token literal-property property"},"dark"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token literal-property property"},"isActive"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" quasarInstance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("dark "),(0,t._)("span",{class:"token operator"},"?"),(0,t.Uk)(" quasarInstance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("dark"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("isActive "),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"void"),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"0"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token literal-property property"},"umd"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" quasarInstance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("umd"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token literal-property property"},"iconSet"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token literal-property property"},"name"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" quasarInstance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("iconSet"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("name"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token literal-property property"},"__installed"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" quasarInstance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("iconSet"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("__installed\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token literal-property property"},"lang"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token literal-property property"},"rtl"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" quasarInstance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("lang"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("rtl\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  window"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("__QUASAR_DEVTOOLS__ "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token literal-property property"},"Quasar"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" quasarInstance\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"detectQuasar"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"bridge"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("window"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)(" Quasar "),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t._)("span",{class:"token comment"},"// UMD"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"initQuasar"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("bridge"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token literal-property property"},"version"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" window"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("Quasar"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("version"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token literal-property property"},"dark"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" window"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("Quasar"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("Dark"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token operator"},"..."),(0,t.Uk)("window"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)(" Quasar "),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token literal-property property"},"umd"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token boolean"},"true"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t._)("span",{class:"token comment"},"// CLI"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" isVue3 "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token boolean"},"false"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"setTimeout"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" all "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" document"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"querySelectorAll"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'*'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" el\n      "),(0,t._)("span",{class:"token keyword"},"for"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" i "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"0"),(0,t._)("span",{class:"token punctuation"},";"),(0,t.Uk)(" i "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)(" all"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("length"),(0,t._)("span",{class:"token punctuation"},";"),(0,t.Uk)(" i"),(0,t._)("span",{class:"token operator"},"++"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("all"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("i"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("__vue__ "),(0,t._)("span",{class:"token operator"},"||"),(0,t.Uk)(" all"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("i"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("__vue_app__"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          el "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" all"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("i"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n          isVue3 "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" all"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("i"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("__vue_app__ "),(0,t._)("span",{class:"token operator"},"!=="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"void"),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"0"),(0,t.Uk)("\n          "),(0,t._)("span",{class:"token keyword"},"break"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n      "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("el"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" Vue "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" isVue3 "),(0,t._)("span",{class:"token operator"},"?"),(0,t.Uk)(" el"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("__vue_app__ "),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" Object"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"getPrototypeOf"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("el"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("__vue__"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("constructor\n\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" quasar "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" isVue3 "),(0,t._)("span",{class:"token operator"},"?"),(0,t.Uk)(" Vue"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("config"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("globalProperties"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("$q "),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},"Vue"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("prototype"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("$q\n        "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("quasar"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          "),(0,t._)("span",{class:"token function"},"initQuasar"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("bridge"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" quasar"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" Vue"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"100"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])],-1),u=(0,t._)("pre",{class:"doc-code language-js"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,t._)("span",{class:"token comment"},"// dom-hooks.js:"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(" detectQuasar "),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'./dom/detect-quasar'"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"attachDomHooks"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"bridge"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"detectQuasar"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("bridge"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])],-1),l=(0,t._)("p",null,"上面的桥接器将通知BEX中的所有监听器，Quasar已经被找到，并同时发送实例信息。",-1);function _(n,a,s,_,r,i){const U=(0,t.up)("doc-page");return(0,t.wg)(),(0,t.j4)(U,{"meta-title":_.metaTitle,title:"DOM 钩子",nav:_.nav,toc:_.toc,"meta-desc":_.metaDesc},{default:(0,t.w5)((()=>[o,e,p,c,k,u,l])),_:1},8,["meta-title","nav","toc","meta-desc"])}var r=s(17536);const i={name:"DocMarkdownPage",setup(){return{metaTitle:"DOM 钩子",metaDesc:"如何在 Quasar 浏览器扩展模式下使用dom钩子与底层网页通信。",nav:[{name:"内容钩子",category:"开发浏览器扩展",path:"/quasar-cli/developing-browser-extensions/content-hooks",dir:"left"},{name:"Ajax 请求",category:"Quasar CLI",path:"/quasar-cli/ajax-requests",dir:"right"}],toc:[],copyHeading:r.Et}}};var U=s(74260);const d=(0,U.Z)(i,[["render",_]]),y=d}}]);