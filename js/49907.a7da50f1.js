"use strict";(globalThis["webpackChunkquasar_dev"]=globalThis["webpackChunkquasar_dev"]||[]).push([[49907],{49907:(o,s,a)=>{a.r(s),a.d(s,{default:()=>T});var e=a(83673);const t=(0,e.Uk)("请看我们的"),n=(0,e.Uk)("客户端激活"),c=(0,e.Uk)("页面。当你得到激活错误时，这意味着在服务器上渲染的HTML与在客户端渲染的等效HTML不一致。这个错误只在开发时出现(而不是在生产时)，在你发布你的网站之前，它肯定需要被解决。是否有一些内容你只能在客户端生成？那就使用"),l=(0,e.Uk)("QNoSsr"),r=(0,e.Uk)("。"),i=(0,e._)("p",null,[(0,e.Uk)("当为SSR构建时，只使用"),(0,e._)("code",{class:"doc-token"},"$q.platform"),(0,e.Uk)("/"),(0,e._)("code",{class:"doc-token"},"$q.cookies"),(0,e.Uk)("形式。如果你需要使用"),(0,e._)("code",{class:"doc-token"},"import Platform from 'quasar/src/plugins/Platform.js';import Cookies from 'quasar/src/plugins/Cookies.js';"),(0,e.Uk)("(在服务器端时)，那么你需要这样做：")],-1),k=(0,e._)("pre",{class:"doc-code language-js"},[(0,e._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,e._)("span",{class:"token comment"},"// 与平台的示例；对Cookies也是如此"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"import"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" Platform "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"from"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'quasar'"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token comment"},"// 你需要访问`ssrContext`。"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"function"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token parameter"},"ssrContext"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token keyword"},"const"),(0,e.Uk)(" platform "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(" process"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("env"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token constant"},"SERVER"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token operator"},"?"),(0,e.Uk)(" Platform"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"parseSSR"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("ssrContext"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(" Platform "),(0,e._)("span",{class:"token comment"},"// otherwise we're on client"),(0,e.Uk)("\n\n  "),(0,e._)("span",{class:"token comment"},"// 平台等同于非SSR构建中的全局导入"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])],-1),p=(0,e._)("code",{class:"doc-token"},"ssrContext",-1),u=(0,e.Uk)("在"),d=(0,e.Uk)("Boot Files"),_=(0,e.Uk)(" 或"),m=(0,e.Uk)("PreFetch Feature"),U=(0,e.Uk)(" 中可用，它是作为一个参数提供。"),g=(0,e.Uk)("这是有原因的。在一个纯客户端的应用中，每个用户都会在他们的浏览器中使用一个新的应用实例。对于服务器端的渲染，我们也想要同样的东西。每个请求都应该有一个新鲜的、孤立的应用程序实例，这样就不会有跨请求的状态污染。所以"),f=(0,e.Uk)("Platform"),S=(0,e.Uk)(" 和"),h=(0,e.Uk)("Cookies"),w=(0,e.Uk)(" 需要分别绑定到每个请求。"),v=(0,e.Uk)("另外一个好主意是阅读"),C=(0,e.Uk)("Writing Universal Code"),q=(0,e.Uk)(" 文档页面。"),P=(0,e._)("p",null,"当在服务器端运行代码时，存储设施不能工作。网络存储是一个仅适用于浏览器的API。",-1);function y(o,s,a,y,R,W){const b=(0,e.up)("doc-link"),H=(0,e.up)("doc-page");return(0,e.wg)(),(0,e.j4)(H,{"meta-title":y.metaTitle,title:"SSR常见问题",nav:y.nav,toc:y.toc,"meta-desc":y.metaDesc},{default:(0,e.w5)((()=>[(0,e._)("h2",{id:"我为什么会出现激活错误？",class:"doc-heading doc-h2",onClick:s[0]||(s[0]=o=>y.copyHeading("我为什么会出现激活错误？"))},"我为什么会出现激活错误？"),(0,e._)("p",null,[t,(0,e.Wm)(b,{to:"/quasar-cli/developing-ssr/client-side-hydration"},{default:(0,e.w5)((()=>[n])),_:1}),c,(0,e.Wm)(b,{to:"/vue-components/no-ssr"},{default:(0,e.w5)((()=>[l])),_:1}),r]),(0,e._)("h2",{id:"为什么导入platform和cookies不起作用？",class:"doc-heading doc-h2",onClick:s[1]||(s[1]=o=>y.copyHeading("为什么导入platform和cookies不起作用？"))},"为什么导入Platform和Cookies不起作用？"),i,k,(0,e._)("p",null,[p,u,(0,e.Wm)(b,{to:"/quasar-cli/boot-files"},{default:(0,e.w5)((()=>[d])),_:1}),_,(0,e.Wm)(b,{to:"/quasar-cli/prefetch-feature"},{default:(0,e.w5)((()=>[m])),_:1}),U]),(0,e._)("p",null,[g,(0,e.Wm)(b,{to:"/options/platform-detection"},{default:(0,e.w5)((()=>[f])),_:1}),S,(0,e.Wm)(b,{to:"/quasar-plugins/cookies"},{default:(0,e.w5)((()=>[h])),_:1}),w]),(0,e._)("p",null,[v,(0,e.Wm)(b,{to:"/quasar-cli/developing-ssr/writing-universal-code"},{default:(0,e.w5)((()=>[C])),_:1}),q]),(0,e._)("h2",{id:"为什么localstorage和sessionstorage不工作？",class:"doc-heading doc-h2",onClick:s[2]||(s[2]=o=>y.copyHeading("为什么localstorage和sessionstorage不工作？"))},"为什么LocalStorage和SessionStorage不工作？"),P])),_:1},8,["meta-title","nav","toc","meta-desc"])}var R=a(17536);const W={name:"DocMarkdownPage",setup(){return{metaTitle:"SSR常见问题",metaDesc:"Quasar服务器端渲染应用程序的技巧和窍门。",nav:[{name:"带PWA的SSR",category:"开发 SSR",path:"/quasar-cli/developing-ssr/ssr-with-pwa",dir:"left"},{name:"构建命令",category:"开发 SSR",path:"/quasar-cli/developing-ssr/build-commands",dir:"right"}],toc:[{id:"我为什么会出现激活错误？",title:"我为什么会出现激活错误？"},{id:"为什么导入platform和cookies不起作用？",title:"为什么导入Platform和Cookies不起作用？"},{id:"为什么localstorage和sessionstorage不工作？",title:"为什么LocalStorage和SessionStorage不工作？"}],copyHeading:R.Et}}};var b=a(74260);const H=(0,b.Z)(W,[["render",y]]),T=H}}]);