"use strict";(globalThis["webpackChunkquasar_dev"]=globalThis["webpackChunkquasar_dev"]||[]).push([[9806],{9806:(e,t,o)=>{o.r(t),o.d(t,{default:()=>y});var a=o(83673);const n=(0,a._)("p",null,"A SSR app has the same code running on server and on client. Declaring a Vue directive (or directly importing it) in a .vue SFC file is usually enough for making it to work on non-SSR builds. But on SSR builds and due to the architecture of Vue 3 (when also using vue-loader to handle the .vue files, like Quasar does), it requires some extra leg work. This page will teach what you need to do.",-1),s=(0,a._)("p",null,"When building the server-side of your app, Vue requires you to specify the SSR transformation for each of your custom Vue directives, otherwise it will error out saying that it doesn’t know how to handle that specific directive when encountered in your SFC templates.",-1),r=(0,a._)("div",{class:"doc-note doc-note--tip"},[(0,a._)("p",{class:"doc-note__title"},"TIP"),(0,a._)("p",null,"You will NOT need to do anything for the Quasar supplied Vue directives to work. The Quasar App CLI takes care of declaring the SSR transformations for it already.")],-1),i=(0,a._)("p",null,[(0,a.Uk)("When adding the SSR mode, Quasar CLI will create the "),(0,a._)("code",{class:"doc-token"},"src-ssr/directives"),(0,a.Uk)(" folder. It will watch this folder for any .js (or .ts if TS is enabled) files and inject these transformations into the build.")],-1),c=(0,a._)("p",null,[(0,a.Uk)("Let’s say that we have a custom Vue directive named "),(0,a._)("code",{class:"doc-token"},"my-dir"),(0,a.Uk)(" that we are using in our app. We’ve declared or imported it into our app, but now in order to make SSR’s server-side code running correctly, we now need to create a file for it. Since the directive is named "),(0,a._)("code",{class:"doc-token"},"my-dir"),(0,a.Uk)(", we’ll create the "),(0,a._)("code",{class:"doc-token"},"my-dir.js"),(0,a.Uk)(" file:")],-1),l=(0,a._)("pre",{class:"doc-code language-js"},[(0,a._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,a._)("span",{class:"token comment"},"// src-ssr/directives/my-dir.js"),(0,a.Uk)("\n\n"),(0,a._)("span",{class:"token keyword"},"export"),(0,a.Uk)(),(0,a._)("span",{class:"token keyword"},"default"),(0,a.Uk)(),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token parameter"},"dir"),(0,a._)("span",{class:"token punctuation"},")"),(0,a.Uk)(),(0,a._)("span",{class:"token operator"},"=>"),(0,a.Uk)(),(0,a._)("span",{class:"token punctuation"},"{"),(0,a.Uk)("\n  "),(0,a._)("span",{class:"token keyword"},"return"),(0,a.Uk)(),(0,a._)("span",{class:"token punctuation"},"{"),(0,a.Uk)("\n    "),(0,a._)("span",{class:"token literal-property property"},"props"),(0,a._)("span",{class:"token operator"},":"),(0,a.Uk)(),(0,a._)("span",{class:"token punctuation"},"["),(0,a._)("span",{class:"token punctuation"},"]"),(0,a.Uk)("\n  "),(0,a._)("span",{class:"token punctuation"},"}"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token punctuation"},"}"),(0,a.Uk)("\n")])],-1),d=(0,a._)("p",null,[(0,a.Uk)("The above is essentially a noop SSR transformation for our directive. Based on what your Vue directive does on client-side, you should write the appropriate Vue SSR transformation. Then you should repeat the process for all your "),(0,a._)("strong",null,"non-Quasar"),(0,a.Uk)(" Vue directives.")],-1),u=(0,a._)("div",{class:"doc-note doc-note--tip"},[(0,a._)("p",{class:"doc-note__title"},"TIP"),(0,a._)("p",null,"Please head to the Vue 3 documentation which should explain how to write a Vue SSR transformation for your directive. Please note that at the moment of writing these lines, the Vue 3 SSR documentation website is still incomplete.")],-1),h=(0,a._)("p",null,"If unsure how to write the necessary transformation function, then simply use the noop transformation from the above code sample for all your directives.",-1),p=(0,a._)("div",{class:"doc-note doc-note--danger"},[(0,a._)("p",{class:"doc-note__title"},"WARNING"),(0,a._)("p",null,[(0,a.Uk)("What you need to make sure is that the name of the files match with the "),(0,a._)("strong",null,"kebab-case"),(0,a.Uk)(" name of your directives.")])],-1),k=(0,a._)("p",null,[(0,a.Uk)("Due to the fact that these transformations are supplied to vue-loader, whenever you add/remove/change any of the files directly under the "),(0,a._)("code",{class:"doc-token"},"src-ssr/directives"),(0,a.Uk)(" folder, the dev server will automatically reboot. This means that changes are costly so you should keep this in mind.")],-1);function m(e,t,o,m,_,f){const v=(0,a.up)("doc-page");return(0,a.wg)(),(0,a.j4)(v,{"meta-title":m.metaTitle,title:"Vue SSR Directives","meta-desc":m.metaDesc},{default:(0,a.w5)((()=>[n,s,r,(0,a._)("h2",{id:"how-to-declare-a-directive",class:"doc-heading doc-h2",onClick:t[0]||(t[0]=e=>m.copyHeading("how-to-declare-a-directive"))},"How to declare a directive"),i,c,l,d,u,h,p,(0,a._)("h2",{id:"hot-module-reload",class:"doc-heading doc-h2",onClick:t[1]||(t[1]=e=>m.copyHeading("hot-module-reload"))},"Hot module reload"),k])),_:1},8,["meta-title","meta-desc"])}var _=o(17536);const f={name:"DocMarkdownPage",setup(){return{metaTitle:"Vue SSR Directives",metaDesc:"Managing the Vue directives for SSR in a Quasar app.",copyHeading:_.Et}}};var v=o(74260);const w=(0,v.Z)(f,[["render",m]]),y=w}}]);