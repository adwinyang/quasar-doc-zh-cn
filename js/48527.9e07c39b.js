"use strict";(globalThis["webpackChunkquasar_dev"]=globalThis["webpackChunkquasar_dev"]||[]).push([[48527],{48527:(n,s,a)=>{a.r(s),a.d(s,{default:()=>j});var t=a(83673);const o=(0,t._)("code",{class:"doc-token"},"src-bex/js/content-hooks.js",-1),e=(0,t.Uk)("本质上是一个标准的"),c=(0,t.Uk)("内容脚本"),p=(0,t.Uk)(" ，我们欢迎你这样使用它。内容脚本能够访问底层网页的DOM，因此你能够操纵上述网页的内容。"),k=(0,t._)("p",null,"这个文件的额外好处是这个功能。",-1),l=(0,t._)("pre",{class:"doc-code language-js"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"attachContentHooks"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"bridge"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])],-1),u=(0,t._)("p",null,"这个函数通过Quasar BEX构建链自动调用，并注入一个桥梁，这个桥梁在你的Quasar App实例和BEX的后台脚本之间共享。",-1),_=(0,t._)("p",null,"例如，假设我们想对Quasar App上的一个按钮作出反应，并在底层网页上突出显示一些文本，这将通过内容脚本来完成。",-1),i=(0,t._)("pre",{class:"doc-code language-js"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,t._)("span",{class:"token comment"},"// Quasar App, /src"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token function"},"setup"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" $q "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"useQuasar"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n  "),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"myButtonClickHandler"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    $q"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("bex"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"send"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'highlight.content.event'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t._)("span",{class:"token literal-property property"},"someData"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'someValue '"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"then"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"r"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      console"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"log"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'Text has been highlighted'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n  "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" myButtonClickHandler "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])],-1),r=(0,t._)("pre",{class:"doc-code language-css"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-css"},[(0,t._)("span",{class:"token comment"},"/* src-bex/css/content-css.css */"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token selector"},".bex-highlight"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token property"},"background-color"),(0,t._)("span",{class:"token punctuation"},":"),(0,t.Uk)(" red"),(0,t._)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])],-1),d=(0,t._)("pre",{class:"doc-code language-js"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,t._)("span",{class:"token comment"},"// src-bex/js/content-hooks.js。"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"attachContentHooks"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"bridge"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  bridge"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"on"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'highlight.content.event'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token parameter"},"event"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 找到一个.some-class元素并添加我们的高亮CSS类。"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" el "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" document"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"querySelector"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'.some-class'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("el "),(0,t._)("span",{class:"token operator"},"!=="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"null"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      el"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("classList"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"add"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'bex-highlight'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token comment"},"// 不要求但解决我们的承诺。"),(0,t.Uk)("\n    bridge"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"send"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("event"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("responseKey"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])],-1),U=(0,t.Uk)("内容脚本存在于一个"),g=(0,t.Uk)("隔离的世界"),m=(0,t.Uk)(" 中，允许内容脚本对其JavaScript环境进行修改，而不会与页面或其他内容脚本发生冲突。"),h=(0,t._)("p",null,"隔离的世界不允许内容脚本、扩展和网页访问任何由其他人创建的变量或函数。这也使内容脚本有能力启用网页不应访问的功能。",-1),f=(0,t._)("p",null,[(0,t.Uk)("这就是 "),(0,t._)("code",{class:"doc-token"},"dom-hooks"),(0,t.Uk)(" 的作用。")],-1);function w(n,s,a,w,y,b){const v=(0,t.up)("doc-link"),x=(0,t.up)("doc-page");return(0,t.wg)(),(0,t.j4)(x,{"meta-title":w.metaTitle,title:"内容钩子",nav:w.nav,toc:w.toc,"meta-desc":w.metaDesc},{default:(0,t.w5)((()=>[(0,t._)("p",null,[o,e,(0,t.Wm)(v,{to:"https://developer.chrome.com/extensions/content_scripts"},{default:(0,t.w5)((()=>[c])),_:1}),p]),k,l,u,_,i,r,d,(0,t._)("p",null,[U,(0,t.Wm)(v,{to:"https://developer.chrome.com/extensions/content_scripts#isolated_world"},{default:(0,t.w5)((()=>[g])),_:1}),m]),h,f])),_:1},8,["meta-title","nav","toc","meta-desc"])}var y=a(17536);const b={name:"DocMarkdownPage",setup(){return{metaTitle:"内容钩子",metaDesc:"如何在 Quasar 浏览器扩展模式下使用你的内容脚本与你的 Quasar 应用程序和后台脚本进行通信。",nav:[{name:"背景钩子",category:"开发浏览器扩展",path:"/quasar-cli/developing-browser-extensions/background-hooks",dir:"left"},{name:"DOM 钩子",category:"开发浏览器扩展",path:"/quasar-cli/developing-browser-extensions/dom-hooks",dir:"right"}],toc:[],copyHeading:y.Et}}};var v=a(74260);const x=(0,v.Z)(b,[["render",w]]),j=x}}]);