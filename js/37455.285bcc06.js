"use strict";(globalThis["webpackChunkquasar_dev"]=globalThis["webpackChunkquasar_dev"]||[]).push([[37455],{37455:(e,o,t)=>{t.r(o),t.d(o,{default:()=>Te});var n=t(83673);const s=(0,n._)("p",null,"If you are not vigilant when building Electron apps, you will probably be placing the users of your app in tangible digital danger. Things like XSS (Cross Site Scripting) and remote code execution can literally enable attackers to get deep access to the data in your app - and potentially even the underlying operating system.",-1),a=(0,n._)("p",null,"Especially when working “in the open”, i.e. as an open-source project, you will definitely want to consider hardening your application with code-signing and integrity checking. (See “Tips” section)",-1),i=(0,n._)("div",{class:"doc-note doc-note--danger"},[(0,n._)("p",{class:"doc-note__title"},"WARNING"),(0,n._)("p",null,"Under no circumstances should you load and execute remote code. Instead, use only local files (packaged together with your application) to execute Node.js code in your main thread and/or preload script.")],-1),l=(0,n._)("p",null,"The Electron team itself makes the following recommendations:",-1),c=(0,n.Uk)("Make sure that you leave "),r=(0,n._)("code",{class:"doc-token"},"webPreferences",-1),d=(0,n.Uk)(" > "),u=(0,n._)("code",{class:"doc-token"},"contextIsolation",-1),h=(0,n.Uk)(" set to "),p=(0,n._)("code",{class:"doc-token"},"true",-1),k=(0,n.Uk)(". Use the "),m=(0,n.Uk)("preload script"),y=(0,n.Uk)(" to inject only must-have APIs to the renderer thread."),g=(0,n.Uk)("If you must load remote content and cannot work around that, then "),_=(0,n.Uk)("only load secure content"),w=(0,n.Uk)("Use "),b=(0,n._)("code",{class:"doc-token"},"ses.setPermissionRequestHandler()",-1),f=(0,n.Uk)(" in all sessions that load remote content"),v=(0,n.Uk)("Do not disable "),U=(0,n._)("code",{class:"doc-token"},"webSecurity",-1),W=(0,n.Uk)("Do not set "),j=(0,n._)("code",{class:"doc-token"},"allowRunningInsecureContent",-1),C=(0,n.Uk)(" to "),H=(0,n._)("code",{class:"doc-token"},"true",-1),I=(0,n.Uk)("Do not enable experimental features"),S=(0,n.Uk)("Do not use "),x=(0,n._)("code",{class:"doc-token"},"enableBlinkFeatures",-1),T=(0,n._)("code",{class:"doc-token"},"<webview>",-1),P=(0,n.Uk)(": Do not use "),q=(0,n._)("code",{class:"doc-token"},"allowpopups",-1),D=(0,n._)("code",{class:"doc-token"},"<webview>",-1),E=(0,n.Uk)(": Verify options and params"),A=(0,n.Uk)("Disable or limit navigation"),G=(0,n.Uk)("Disable or limit creation of new windows"),R=(0,n._)("p",null,"Except for items 3 and 4 above, Electron will put a warning in the dev console if one of the these issues have been detected.",-1),F=(0,n._)("p",null,[(0,n.Uk)("You should know this by now, but if you are not using "),(0,n._)("strong",null,"https"),(0,n.Uk)(" / "),(0,n._)("strong",null,"sftp"),(0,n.Uk)(" / "),(0,n._)("strong",null,"wss"),(0,n.Uk)(" then the app’s communications with the outside world can be very easily tampered with. Whatever you are building, please use a secure protocol everywhere.")],-1),z=(0,n._)("p",null,"Having read & write permissions to the filesystem is the holy grail for penetration testers, and if your app enables this type of interaction, consider using IPC and multiple windows (with varying permissions) in order to minimize the attack surface.",-1),M=(0,n._)("p",null,"If the user of your application has secrets like wallet addresses, personal information or some other kind of trade secrets, keep that information encrypted when at rest, un-encrypt it in-memory only when it is needed and make sure to overwrite / destroy the object in memory when you are done with it. But no matter how you approach this, follow these four rules:",-1),N=(0,n._)("ol",null,[(0,n._)("li",null,"use strong crypto (i.e. collision resistant and not md5)"),(0,n._)("li",null,"do not invent a novel type of encryption"),(0,n._)("li",null,"follow the implementation instructions explicitly"),(0,n._)("li",null,"think about the user-experience")],-1),O=(0,n._)("p",null,"You probably don’t want rogue hoody-wearing menaces to be executing something like this in the console of your app:",-1),Y=(0,n._)("pre",{class:"doc-code language-js"},[(0,n._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,n.Uk)("window"),(0,n._)("span",{class:"token punctuation"},"."),(0,n.Uk)("location"),(0,n._)("span",{class:"token operator"},"="),(0,n._)("span",{class:"token string"},"'https://evilsite.com/looks-just-like-your-app'"),(0,n.Uk)("\n")])],-1),L=(0,n._)("p",null,[(0,n.Uk)("The key-combination "),(0,n._)("kbd",null,"CTRL"),(0,n.Uk)("+"),(0,n._)("kbd",null,"SHIFT"),(0,n.Uk)("+"),(0,n._)("kbd",null,"I"),(0,n.Uk)(" (or "),(0,n._)("kbd",null,"ALT"),(0,n.Uk)("+"),(0,n._)("kbd",null,"CMD"),(0,n.Uk)("+"),(0,n._)("kbd",null,"I"),(0,n.Uk)(" on Mac) will open the dev tools and enable inspection of the application. It will even enable some degree of modification. Prevent the simple "),(0,n._)("code",{class:"doc-token"},"evil maid"),(0,n.Uk)(" attack by catching these keypresses and "),(0,n._)("code",{class:"doc-token"},"return false"),(0,n.Uk)(".")],-1),B=(0,n.Uk)("When you have built your binary blobs and want to publish them e.g. on GitHub, use "),Q=(0,n._)("code",{class:"doc-token"},"shasum",-1),J=(0,n.Uk)(" and post these results somewhere prominent (like on the GitHub release page for your project) and potentially on a public blockchain, such as "),K=(0,n.Uk)("Steem"),V=(0,n.Uk)("."),X=(0,n._)("pre",{class:"doc-code language-bash"},[(0,n._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-bash"},[(0,n.Uk)("$ shasum -a "),(0,n._)("span",{class:"token number"},"256"),(0,n.Uk)(" myApp-v1.0.0_darwin-x64.dmg\n40ed03e0fb3c422e554c7e75d41ba71405a4a49d560b1bf92a00ea6f5cbd8daa myApp-v1.0.0_darwin-x64.dmg\n")])],-1),Z=(0,n.Uk)("Although not a hard requirement for sharing your app, signing code is a best practice - and it is required by both the MacOS and Windows stores. Read more about it at this "),$=(0,n.Uk)("official Electron tutorial"),ee=(0,n.Uk)("."),oe=(0,n.Uk)("Snyk.io"),te=(0,n.Uk)(" is a service, CLI and even GitHub integration bot that tracks vulnerabilities in node modules by comparing the dependencies in your package.json with its list of compromised modules. In many cases their service can recommend minimum update versions or even provide modules that they themselves have patched. They also undertake research and vulnerability disclosure. For an example of something that should scare the socks off of you if you are doing anything with compressed files (zip, tar, etc.) check out their "),ne=(0,n.Uk)("writeup"),se=(0,n.Uk)(" and "),ae=(0,n.Uk)("list of affected software"),ie=(0,n.Uk)("."),le=(0,n._)("p",null,"Use a dedicated physical desktop machine for each platform target. If you have to keep this device online, make sure the OS is always updated, permits zero inbound connections from the internet / bluetooth (especially for shell / ssh) and run constant virus and rootkit checks.",-1),ce=(0,n._)("p",null,"Permit only GPG-signed commits to be merged and require at least two team members (who did not make the PR) to review and approve the commit.",-1),re=(0,n._)("p",null,"Reconsider your node package management system:",-1),de=(0,n.Uk)("use a private npm registry (like "),ue=(0,n.Uk)("JFrog"),he=(0,n.Uk)(")"),pe=(0,n._)("li",null,"fix your packages to specific versions known to work",-1),ke=(0,n._)("li",null,"use pnpm",-1),me=(0,n._)("li",null,"audit each and every single module and its dependencies",-1),ye=(0,n.Uk)("Somebody smart might have hacked your project (or an underlying library). If you are making money with this app, consider getting a "),ge=(0,n.Uk)("Hacker One"),_e=(0,n.Uk)(" account and running a constant bounty award. At least you’ll be able to convince the hacker to be ethical and NOT sell the exploit to your competitor."),we=(0,n.Uk)("You may feel overwhelmed, because the awesomeness of Electron brings with it a great many headaches that you never wanted to think about. If this is the case, consider "),be=(0,n.Uk)("reaching out"),fe=(0,n.Uk)(" and getting expert support for the review, audit and hardening of your app by the team of seasoned devs that brought you the Quasar Framework."),ve={class:"doc-note"},Ue=(0,n.Uk)("Parts of this page have been taken from the official "),We=(0,n.Uk)("Electron Security Guide"),je=(0,n.Uk)(".");function Ce(e,o,t,Ce,He,Ie){const Se=(0,n.up)("doc-link"),xe=(0,n.up)("q-separator"),Te=(0,n.up)("doc-page");return(0,n.wg)(),(0,n.j4)(Te,{"meta-title":Ce.metaTitle,title:"Electron Security Concerns","meta-desc":Ce.metaDesc},{default:(0,n.w5)((()=>[s,a,i,(0,n._)("h2",{id:"checklist-security-recommendations",class:"doc-heading doc-h2",onClick:o[0]||(o[0]=e=>Ce.copyHeading("checklist-security-recommendations"))},"Checklist: Security Recommendations"),l,(0,n._)("ol",null,[(0,n._)("li",null,[c,r,d,u,h,p,k,(0,n.Wm)(Se,{to:"/quasar-cli/developing-electron-apps/electron-preload-script"},{default:(0,n.w5)((()=>[m])),_:1}),y]),(0,n._)("li",null,[g,(0,n.Wm)(Se,{to:"https://electronjs.org/docs/tutorial/security#1-only-load-secure-content"},{default:(0,n.w5)((()=>[_])),_:1})]),(0,n._)("li",null,[(0,n.Wm)(Se,{to:"https://electronjs.org/docs/tutorial/security#4-handle-session-permission-requests-from-remote-content"},{default:(0,n.w5)((()=>[w,b,f])),_:1})]),(0,n._)("li",null,[(0,n.Wm)(Se,{to:"https://electronjs.org/docs/tutorial/security#5-do-not-disable-websecurity"},{default:(0,n.w5)((()=>[v,U])),_:1})]),(0,n._)("li",null,[(0,n.Wm)(Se,{to:"https://electronjs.org/docs/tutorial/security#7-do-not-set-allowrunninginsecurecontent-to-true"},{default:(0,n.w5)((()=>[W,j,C,H])),_:1})]),(0,n._)("li",null,[(0,n.Wm)(Se,{to:"https://electronjs.org/docs/tutorial/security#8-do-not-enable-experimental-features"},{default:(0,n.w5)((()=>[I])),_:1})]),(0,n._)("li",null,[(0,n.Wm)(Se,{to:"https://electronjs.org/docs/tutorial/security#9-do-not-use-enableblinkfeatures"},{default:(0,n.w5)((()=>[S,x])),_:1})]),(0,n._)("li",null,[(0,n.Wm)(Se,{to:"https://electronjs.org/docs/tutorial/security#10-do-not-use-allowpopups"},{default:(0,n.w5)((()=>[T,P,q])),_:1})]),(0,n._)("li",null,[(0,n.Wm)(Se,{to:"https://electronjs.org/docs/tutorial/security#11-verify-webview-options-before-creation"},{default:(0,n.w5)((()=>[D,E])),_:1})]),(0,n._)("li",null,[(0,n.Wm)(Se,{to:"https://electronjs.org/docs/tutorial/security#12-disable-or-limit-navigation"},{default:(0,n.w5)((()=>[A])),_:1})]),(0,n._)("li",null,[(0,n.Wm)(Se,{to:"https://electronjs.org/docs/tutorial/security#13-disable-or-limit-creation-of-new-windows"},{default:(0,n.w5)((()=>[G])),_:1})])]),R,(0,n._)("h2",{id:"tips-and-tricks",class:"doc-heading doc-h2",onClick:o[1]||(o[1]=e=>Ce.copyHeading("tips-and-tricks"))},"Tips and Tricks"),(0,n._)("h4",{id:"communication-protocols",class:"doc-heading doc-h4",onClick:o[2]||(o[2]=e=>Ce.copyHeading("communication-protocols"))},"Communication Protocols"),F,(0,n._)("h4",{id:"filesystem-access",class:"doc-heading doc-h4",onClick:o[3]||(o[3]=e=>Ce.copyHeading("filesystem-access"))},"Filesystem Access"),z,(0,n._)("h4",{id:"encryption",class:"doc-heading doc-h4",onClick:o[4]||(o[4]=e=>Ce.copyHeading("encryption"))},"Encryption"),M,N,(0,n._)("h4",{id:"disable-developer-tools-in-production",class:"doc-heading doc-h4",onClick:o[5]||(o[5]=e=>Ce.copyHeading("disable-developer-tools-in-production"))},"Disable developer tools in production"),O,Y,L,(0,n._)("h4",{id:"publish-checksums",class:"doc-heading doc-h4",onClick:o[6]||(o[6]=e=>Ce.copyHeading("publish-checksums"))},"Publish checksums"),(0,n._)("p",null,[B,Q,J,(0,n.Wm)(Se,{to:"https://steemworld.org/@quasarframework"},{default:(0,n.w5)((()=>[K])),_:1}),V]),X,(0,n._)("h4",{id:"sign-the-builds",class:"doc-heading doc-h4",onClick:o[7]||(o[7]=e=>Ce.copyHeading("sign-the-builds"))},"Sign the builds"),(0,n._)("p",null,[Z,(0,n.Wm)(Se,{to:"https://electronjs.org/docs/tutorial/code-signing"},{default:(0,n.w5)((()=>[$])),_:1}),ee]),(0,n._)("h4",{id:"use-snyk",class:"doc-heading doc-h4",onClick:o[8]||(o[8]=e=>Ce.copyHeading("use-snyk"))},"Use SNYK"),(0,n._)("p",null,[(0,n.Wm)(Se,{to:"https://snyk.io"},{default:(0,n.w5)((()=>[oe])),_:1}),te,(0,n.Wm)(Se,{to:"https://snyk.io/research/zip-slip-vulnerability"},{default:(0,n.w5)((()=>[ne])),_:1}),se,(0,n.Wm)(Se,{to:"https://github.com/snyk/zip-slip-vulnerability"},{default:(0,n.w5)((()=>[ae])),_:1}),ie]),(0,n._)("h4",{id:"for-the-truly-paranoid",class:"doc-heading doc-h4",onClick:o[9]||(o[9]=e=>Ce.copyHeading("for-the-truly-paranoid"))},"For the truly paranoid"),le,ce,re,(0,n._)("ul",null,[(0,n._)("li",null,[de,(0,n.Wm)(Se,{to:"https://jfrog.com/"},{default:(0,n.w5)((()=>[ue])),_:1}),he]),pe,ke,me]),(0,n._)("h4",{id:"pay-to-get-hacked",class:"doc-heading doc-h4",onClick:o[10]||(o[10]=e=>Ce.copyHeading("pay-to-get-hacked"))},"Pay to get hacked"),(0,n._)("p",null,[ye,(0,n.Wm)(Se,{to:"https://hackerone.com"},{default:(0,n.w5)((()=>[ge])),_:1}),_e]),(0,n._)("h4",{id:"get-help",class:"doc-heading doc-h4",onClick:o[11]||(o[11]=e=>Ce.copyHeading("get-help"))},"Get help"),(0,n._)("p",null,[we,(0,n.Wm)(Se,{to:"mailto:razvan.stoenescu@gmail.com"},{default:(0,n.w5)((()=>[be])),_:1}),fe]),(0,n.Wm)(xe,{class:"q-mt-xl"}),(0,n._)("blockquote",ve,[(0,n._)("p",null,[Ue,(0,n.Wm)(Se,{to:"https://electronjs.org/docs/tutorial/security"},{default:(0,n.w5)((()=>[We])),_:1}),je])])])),_:1},8,["meta-title","meta-desc"])}var He=t(17536);const Ie={name:"DocMarkdownPage",setup(){return{metaTitle:"Electron Security Concerns",metaDesc:"The things you should know about security in a Quasar desktop app.",copyHeading:He.Et}}};var Se=t(74260);const xe=(0,Se.Z)(Ie,[["render",Ce]]),Te=xe}}]);