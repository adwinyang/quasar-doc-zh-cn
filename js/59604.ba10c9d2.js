"use strict";(globalThis["webpackChunkquasar_dev"]=globalThis["webpackChunkquasar_dev"]||[]).push([[59604],{59604:(n,s,e)=>{e.r(s),e.d(s,{default:()=>q});var t=e(83673);const o=(0,t._)("p",null,[(0,t.Uk)("The "),(0,t._)("code",{class:"doc-token"},"ssrContext"),(0,t.Uk)(" Object is the SSR context with which all the app’s Vue components are rendered with.")],-1),a=(0,t._)("div",{class:"doc-note doc-note--warning"},[(0,t._)("p",{class:"doc-note__title"},"WARNING"),(0,t._)("p",null,[(0,t.Uk)("The "),(0,t._)("code",{class:"doc-token"},"ssrContext"),(0,t.Uk)(" Object is available only on SSR builds, on the server-side compilation (when "),(0,t._)("code",{class:"doc-token"},"process.env.SERVER === true"),(0,t.Uk)(").")])],-1),c=(0,t.Uk)("Among other places, it is supplied as parameter to "),k=(0,t.Uk)("boot files"),p=(0,t.Uk)(", to the "),l=(0,t.Uk)("Vuex store"),u=(0,t.Uk)(" and "),r=(0,t.Uk)("Vue Router"),i=(0,t.Uk)(" initialization functions, and to the "),_=(0,t.Uk)("preFetch"),d=(0,t.Uk)(" method:"),U=(0,t._)("pre",{class:"doc-code language-js"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,t._)("span",{class:"token comment"},"// a boot file"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"..."),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" ssrContext "),(0,t._)("span",{class:"token punctuation"},"}")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t._)("span",{class:"token comment"},"/* ... */"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token comment"},"// src/router/index.[js|ts]"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"..."),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" ssrContext "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t._)("span",{class:"token comment"},"/* ... */"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token comment"},"// src/store/index.[js|ts]"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"..."),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" ssrContext "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t._)("span",{class:"token comment"},"/* ... */"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token comment"},"// with preFetch:"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token function"},"preFetch"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"..."),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" ssrContext "),(0,t._)("span",{class:"token punctuation"},"}")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t._)("span",{class:"token comment"},"/* ... */"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])],-1),m=(0,t._)("p",null,"You can also access the ssrContext in your Vue components. Below are two examples, one with Composition API and one with Options API:",-1),h=(0,t._)("pre",{class:"doc-code language-js"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,t._)("span",{class:"token comment"},"// Composition API"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" useSSRContext "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'vue'"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// ..."),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"setup"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// we need to guard it and call it only on SSR server-side:"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" ssrContext "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" process"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("env"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token constant"},"SERVER"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"?"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"useSSRContext"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"null"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// ...do something with it"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])],-1),g=(0,t._)("pre",{class:"doc-code language-js"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,t._)("span",{class:"token comment"},"// Options API"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// ..."),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"created"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t._)("span",{class:"token comment"},"// can be any other Vue component lifecycle hook"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("ssrContext\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])],-1),w=(0,t._)("pre",{class:"doc-code language-js"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,t._)("span",{class:"token literal-property property"},"ssrContext"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  req"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("        "),(0,t._)("span",{class:"token comment"},"// Express.js object"),(0,t.Uk)("\n  res"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("        "),(0,t._)("span",{class:"token comment"},"// Express.js object"),(0,t.Uk)("\n  $q"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("         "),(0,t._)("span",{class:"token comment"},"// The Quasar's $q Object"),(0,t.Uk)("\n  state"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("      "),(0,t._)("span",{class:"token comment"},"// The Vuex state (ONLY if using the Vuex store)"),(0,t.Uk)("\n\n  nonce"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("      "),(0,t._)("span",{class:"token comment"},"// (optional to set it yourself)"),(0,t.Uk)("\n              "),(0,t._)("span",{class:"token comment"},'// The global "nonce" attribute to use'),(0,t.Uk)("\n\n  onRendered"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token comment"},"// Registers a function to be executed server-side after"),(0,t.Uk)("\n              "),(0,t._)("span",{class:"token comment"},"// app has been rendered with Vue. You might need this"),(0,t.Uk)("\n              "),(0,t._)("span",{class:"token comment"},"// to access ssrContext again after it has been fully processed."),(0,t.Uk)("\n              "),(0,t._)("span",{class:"token comment"},"// Example: ssrContext.onRendered(() => { /* ... */ })"),(0,t.Uk)("\n\n  rendered    "),(0,t._)("span",{class:"token comment"},"// (optional to set it yourself)"),(0,t.Uk)("\n              "),(0,t._)("span",{class:"token comment"},"// Set this to a function which will be executed server-side"),(0,t.Uk)("\n              "),(0,t._)("span",{class:"token comment"},"// after the app has been rendered with Vue."),(0,t.Uk)("\n              "),(0,t._)("span",{class:"token comment"},'// We recommend using the "onRendered" instead.'),(0,t.Uk)("\n              "),(0,t._)("span",{class:"token comment"},"//"),(0,t.Uk)("\n              "),(0,t._)("span",{class:"token comment"},"// Purpose: backward compatibility with Vue ecosystem packages"),(0,t.Uk)("\n              "),(0,t._)("span",{class:"token comment"},"// (like @vue/apollo-ssr)"),(0,t.Uk)("\n              "),(0,t._)("span",{class:"token comment"},"// Example: ssrContext.rendered = () => { /* ... */ }"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])],-1),f=(0,t.Uk)("More information on the purpose of the “nonce” property is available on "),x=(0,t.Uk)("MDN"),y=(0,t.Uk)("."),b=(0,t._)("p",null,[(0,t.Uk)("The "),(0,t._)("code",{class:"doc-token"},"req"),(0,t.Uk)(" and "),(0,t._)("code",{class:"doc-token"},"res"),(0,t.Uk)(" are Express.js’s objects for the current server client. One use-case for "),(0,t._)("code",{class:"doc-token"},"req"),(0,t.Uk)(" is accessing "),(0,t._)("code",{class:"doc-token"},"req.url"),(0,t.Uk)(" to get the URL that the client is requesting.")],-1),C=(0,t._)("div",{class:"doc-note doc-note--tip"},[(0,t._)("p",{class:"doc-note__title"},"TIP"),(0,t._)("p",null,[(0,t.Uk)("Feel free to inject your own stuff into ssrContext too, but do NOT tamper with any of the private props (props that start with an underscore, eg. "),(0,t._)("code",{class:"doc-token"},"_someProp"),(0,t.Uk)(").")])],-1);function j(n,s,e,j,v,R){const S=(0,t.up)("doc-link"),T=(0,t.up)("doc-page");return(0,t.wg)(),(0,t.j4)(T,{"meta-title":j.metaTitle,title:"The ssrContext Object","meta-desc":j.metaDesc},{default:(0,t.w5)((()=>[o,(0,t._)("h2",{id:"usage",class:"doc-heading doc-h2",onClick:s[0]||(s[0]=n=>j.copyHeading("usage"))},"Usage"),a,(0,t._)("p",null,[c,(0,t.Wm)(S,{to:"/quasar-cli/boot-files"},{default:(0,t.w5)((()=>[k])),_:1}),p,(0,t.Wm)(S,{to:"/quasar-cli/vuex-store"},{default:(0,t.w5)((()=>[l])),_:1}),u,(0,t.Wm)(S,{to:"/quasar-cli/routing"},{default:(0,t.w5)((()=>[r])),_:1}),i,(0,t.Wm)(S,{to:"/quasar-cli/prefetch-feature"},{default:(0,t.w5)((()=>[_])),_:1}),d]),U,m,h,g,(0,t._)("h2",{id:"anatomy-of-ssrcontext",class:"doc-heading doc-h2",onClick:s[1]||(s[1]=n=>j.copyHeading("anatomy-of-ssrcontext"))},"Anatomy of ssrContext"),w,(0,t._)("p",null,[f,(0,t.Wm)(S,{to:"https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/nonce"},{default:(0,t.w5)((()=>[x])),_:1}),y]),b,C])),_:1},8,["meta-title","meta-desc"])}var v=e(17536);const R={name:"DocMarkdownPage",setup(){return{metaTitle:"The ssrContext Object",metaDesc:"The ssrContext Object in Quasar SSR",copyHeading:v.Et}}};var S=e(74260);const T=(0,S.Z)(R,[["render",j]]),q=T}}]);