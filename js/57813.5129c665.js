"use strict";(globalThis["webpackChunkquasar_dev"]=globalThis["webpackChunkquasar_dev"]||[]).push([[57813],{57813:(n,s,e)=>{e.r(s),e.d(s,{default:()=>Z});var a=e(83673);const t=(0,a._)("p",null,"本指南适用于您希望创建新指令并通过应用扩展提供指令的情况，应用扩展会将指令注入宿主应用程序中(托管应用程序中)。",-1),o={class:"doc-note doc-note--tip"},c=(0,a._)("p",{class:"doc-note__title"},"TIP",-1),p=(0,a.Uk)("要创建一个App Extension项目文件夹，请先阅读"),i=(0,a.Uk)("开发指南>简介"),k=(0,a.Uk)(" 。"),l={class:"doc-note doc-note--tip"},u=(0,a._)("p",{class:"doc-note__title"},"Full Example",-1),_=(0,a.Uk)("要查看我们将构建的示例，请转到 "),r=(0,a.Uk)("MyDirective 完整示例"),d=(0,a.Uk)(" ，这是一个 GitHub 存储库，含有这个应用扩展。"),m=(0,a._)("p",null,"创建一个文件夹结构，以保持你的代码模块化和结构化。例如，对于一个指令，创建一个像这样的结构：",-1),U=(0,a._)("pre",{class:"doc-code language-bash"},[(0,a._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-bash"},[(0,a._)("span",{class:"token builtin class-name"},"."),(0,a.Uk)("\n├── package.json\n└── src\n    ├── boot "),(0,a._)("span",{class:"token comment"},'# 包含 "启动" 代码的文件夹'),(0,a.Uk)("\n    │ └── register-my-directive.js "),(0,a._)("span",{class:"token comment"},"# 组件的启动文件"),(0,a.Uk)("\n    ├── directive "),(0,a._)("span",{class:"token comment"},"# 包含组件的文件夹"),(0,a.Uk)("\n    │ └── MyDirective.js "),(0,a._)("span",{class:"token comment"},"# 指令文件"),(0,a.Uk)("\n    └── index.js "),(0,a._)("span",{class:"token comment"},"# 在 Index API 中描述的内容"),(0,a.Uk)("\n")])],-1),g=(0,a.Uk)("现在，你需要处理注册你的Vue指令。你可以通过"),v=(0,a._)("code",{class:"doc-token"},"/index.js",-1),f=(0,a.Uk)("文件(在"),x=(0,a.Uk)("Index API"),y=(0,a.Uk)(" 中描述)来完成，这个文件是在你设置新 App Extension 时创建的。"),h=(0,a._)("p",null,"让我们分解一下：",-1),j=(0,a._)("pre",{class:"doc-code language-js"},[(0,a._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,a._)("span",{class:"token comment"},"//文件：/index.js"),(0,a.Uk)("\nmodule"),(0,a._)("span",{class:"token punctuation"},"."),(0,a._)("span",{class:"token function-variable function"},"exports"),(0,a.Uk)(),(0,a._)("span",{class:"token operator"},"="),(0,a.Uk)(),(0,a._)("span",{class:"token keyword"},"function"),(0,a.Uk)(),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token parameter"},"api"),(0,a._)("span",{class:"token punctuation"},")"),(0,a.Uk)(),(0,a._)("span",{class:"token punctuation"},"{"),(0,a.Uk)("\n  "),(0,a._)("span",{class:"token comment"},"// (可选！)。"),(0,a.Uk)("\n  "),(0,a._)("span",{class:"token comment"},"// Quasar兼容性检查；你可能需要"),(0,a.Uk)("\n  "),(0,a._)("span",{class:"token comment"},'// 硬性依赖，如最小版本的 "quasar"'),(0,a.Uk)("\n  "),(0,a._)("span",{class:"token comment"},'// 或最低版本的"@quasar/app" CLI。'),(0,a.Uk)("\n  api"),(0,a._)("span",{class:"token punctuation"},"."),(0,a._)("span",{class:"token function"},"compatibleWith"),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token string"},"'quasar'"),(0,a._)("span",{class:"token punctuation"},","),(0,a.Uk)(),(0,a._)("span",{class:"token string"},"'^2.0.0'"),(0,a._)("span",{class:"token punctuation"},")"),(0,a.Uk)("\n  api"),(0,a._)("span",{class:"token punctuation"},"."),(0,a._)("span",{class:"token function"},"compatibleWith"),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token string"},"'@quasar/app'"),(0,a._)("span",{class:"token punctuation"},","),(0,a.Uk)(),(0,a._)("span",{class:"token string"},"'^3.0.0'"),(0,a._)("span",{class:"token punctuation"},")"),(0,a.Uk)("\n\n  "),(0,a._)("span",{class:"token comment"},"// 这里我们扩展了 /quasar.conf.js，所以我们可以添加"),(0,a.Uk)("\n  "),(0,a._)("span",{class:"token comment"},"// 一个引导文件，它注册了我们新的Vue指令。"),(0,a.Uk)("\n  "),(0,a._)("span",{class:"token comment"},'// "extendConf "将被定义在下面(继续阅读教程)'),(0,a.Uk)("\n  api"),(0,a._)("span",{class:"token punctuation"},"."),(0,a._)("span",{class:"token function"},"extendQuasarConf"),(0,a._)("span",{class:"token punctuation"},"("),(0,a.Uk)("extendConf"),(0,a._)("span",{class:"token punctuation"},")"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token punctuation"},"}"),(0,a.Uk)("\n")])],-1),b=(0,a._)("p",null,"第一组是做与 Quasar 的兼容性检查(可选，但推建)。如果你的组件使用的 Quasar 功能是在某个版本之后才有的，你可以确保安装的 Quasar 版本是正确的。",-1),w={class:"doc-note doc-note--tip"},q=(0,a._)("p",{class:"doc-note__title"},"TIP",-1),D=(0,a.Uk)("你不仅可以做"),I=(0,a._)("code",{class:"doc-token"},"api.compatibleWith()",-1),Q=(0,a.Uk)("来检查 Quasar 软件包，还可以检查任何其他可用的软件包(你没有通过你的App Extension自己提供)。请阅读App Extension Development Guide > Introduction页面中的"),C=(0,a.Uk)("Handling package-dependencies"),W=(0,a.Uk)(" 部分以了解更多信息。"),A=(0,a._)("p",null,[(0,a.Uk)("第二组告诉 Quasar 在 "),(0,a._)("code",{class:"doc-token"},"extendQuasarConf"),(0,a.Uk)(" CLI生命周期钩子被调用时调用我们的自定义函数。它看起来会像这样。")],-1),E=(0,a._)("pre",{class:"doc-code language-js"},[(0,a._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,a._)("span",{class:"token comment"},"//文件: /index.js"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token keyword"},"function"),(0,a.Uk)(),(0,a._)("span",{class:"token function"},"extendConf"),(0,a.Uk)(),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token parameter"},"conf"),(0,a._)("span",{class:"token punctuation"},")"),(0,a.Uk)(),(0,a._)("span",{class:"token punctuation"},"{"),(0,a.Uk)("\n  "),(0,a._)("span",{class:"token comment"},"// 确保my-directive引导文件已被注册"),(0,a.Uk)("\n  conf"),(0,a._)("span",{class:"token punctuation"},"."),(0,a.Uk)("boot"),(0,a._)("span",{class:"token punctuation"},"."),(0,a._)("span",{class:"token function"},"push"),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token string"},"'~quasar-app-extension-my-directive/src/boot/register-my-directive.js'"),(0,a._)("span",{class:"token punctuation"},")"),(0,a.Uk)("\n\n  "),(0,a._)("span",{class:"token comment"},"// 确保启动和其他文件被转译"),(0,a.Uk)("\n  conf"),(0,a._)("span",{class:"token punctuation"},"."),(0,a.Uk)("build"),(0,a._)("span",{class:"token punctuation"},"."),(0,a.Uk)("transpileDependencies"),(0,a._)("span",{class:"token punctuation"},"."),(0,a._)("span",{class:"token function"},"push"),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token regex"},[(0,a._)("span",{class:"token regex-delimiter"},"/"),(0,a._)("span",{class:"token regex-source language-regex"},"quasar-app-extension-my-directive[/\\/]src"),(0,a._)("span",{class:"token regex-delimiter"},"/")]),(0,a._)("span",{class:"token punctuation"},")"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token punctuation"},"}"),(0,a.Uk)("\n")])],-1),M=(0,a.Uk)("最后，让我们看看启动文件会是什么样子。请确保你先阅读"),T=(0,a.Uk)("Boot files"),P=(0,a.Uk)(" 文档，了解什么是Boot文件。"),V=(0,a._)("pre",{class:"doc-code language-js"},[(0,a._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,a._)("span",{class:"token comment"},"// file: /src/boot/my-directive.js"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token keyword"},"import"),(0,a.Uk)(" MyDirective "),(0,a._)("span",{class:"token keyword"},"from"),(0,a.Uk)(),(0,a._)("span",{class:"token string"},"'../directive/MyDirective.js'"),(0,a.Uk)("\n\n"),(0,a._)("span",{class:"token comment"},"// 我们向Vue全局注册我们的指令。"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token comment"},'// 记住，Vue中的所有指令都以 "v-"开头。'),(0,a.Uk)("\n"),(0,a._)("span",{class:"token comment"},"// 但这不应该是你指令名称的一部分。"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token comment"},"// https://v3.vuejs.org/guide/custom-directive.html#custom-directives"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token comment"},"// 'my-directive'将被作为'v-my-directive'使用"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token keyword"},"export"),(0,a.Uk)(),(0,a._)("span",{class:"token keyword"},"default"),(0,a.Uk)(),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token parameter"},[(0,a._)("span",{class:"token punctuation"},"{"),(0,a.Uk)(" app "),(0,a._)("span",{class:"token punctuation"},"}")]),(0,a._)("span",{class:"token punctuation"},")"),(0,a.Uk)(),(0,a._)("span",{class:"token operator"},"=>"),(0,a.Uk)(),(0,a._)("span",{class:"token punctuation"},"{"),(0,a.Uk)("\n  app"),(0,a._)("span",{class:"token punctuation"},"."),(0,a._)("span",{class:"token function"},"directive"),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token string"},"'my-directive'"),(0,a._)("span",{class:"token punctuation"},","),(0,a.Uk)(" MyDirective"),(0,a._)("span",{class:"token punctuation"},")"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token punctuation"},"}"),(0,a.Uk)("\n")])],-1);function H(n,s,e,H,B,G){const L=(0,a.up)("doc-link"),F=(0,a.up)("doc-page");return(0,a.wg)(),(0,a.j4)(F,{"meta-title":H.metaTitle,title:"提供一个指令",nav:H.nav,toc:H.toc,"meta-desc":H.metaDesc},{default:(0,a.w5)((()=>[t,(0,a._)("div",o,[c,(0,a._)("p",null,[p,(0,a.Wm)(L,{to:"/app-extensions/development-guide/introduction"},{default:(0,a.w5)((()=>[i])),_:1}),k])]),(0,a._)("div",l,[u,(0,a._)("p",null,[_,(0,a.Wm)(L,{to:"https://github.com/quasarframework/app-extension-examples/tree/v2/my-directive"},{default:(0,a.w5)((()=>[r])),_:1}),d])]),m,U,(0,a._)("p",null,[g,v,f,(0,a.Wm)(L,{to:"/app-extensions/development-guide/index-api"},{default:(0,a.w5)((()=>[x])),_:1}),y]),h,j,b,(0,a._)("div",w,[q,(0,a._)("p",null,[D,I,Q,(0,a.Wm)(L,{to:"/app-extensions/development-guide/introduction#handling-package-dependencies"},{default:(0,a.w5)((()=>[C])),_:1}),W])]),A,E,(0,a._)("p",null,[M,(0,a.Wm)(L,{to:"/quasar-cli/boot-files"},{default:(0,a.w5)((()=>[T])),_:1}),P]),V])),_:1},8,["meta-title","nav","toc","meta-desc"])}var B=e(17536);const G={name:"DocMarkdownPage",setup(){return{metaTitle:"提供一个指令",metaDesc:"关于如何向 Quasar应用扩展的主机应用提供 Vue 指令的技巧和窍门。",nav:[{name:"提供一个UI组件",category:"技巧和窍门",path:"/app-extensions/tips-and-tricks/provide-a-ui-component",dir:"left"},{name:"注入Quasar插件",category:"技巧和窍门",path:"/app-extensions/tips-and-tricks/inject-quasar-plugin",dir:"right"}],toc:[],copyHeading:B.Et}}};var L=e(74260);const F=(0,L.Z)(G,[["render",H]]),Z=F}}]);