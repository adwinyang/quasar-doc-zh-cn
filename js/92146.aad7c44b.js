"use strict";(globalThis["webpackChunkquasar_dev"]=globalThis["webpackChunkquasar_dev"]||[]).push([[92146],{92146:(n,e,a)=>{a.r(e),a.d(e,{default:()=>g});var s=a(83673);const o=(0,s._)("p",null,[(0,s.Uk)("由于主进程是用webpack捆绑的，所以使用"),(0,s._)("code",{class:"doc-token"},"__dirname"),(0,s.Uk)("和"),(0,s._)("code",{class:"doc-token"},"__filename"),(0,s.Uk)("在生产中不会提供一个预期的值。参考文件树，你会发现在生产中，electron-main.js和electron-preload.js文件被放在"),(0,s._)("code",{class:"doc-token"},"dist/electron-*"),(0,s.Uk)("文件夹内。基于这个知识，相应地使用"),(0,s._)("code",{class:"doc-token"},"__dirname"),(0,s.Uk)("和"),(0,s._)("code",{class:"doc-token"},"__filename"),(0,s.Uk)("。")],-1),t=(0,s._)("pre",{class:"doc-code language-bash"},[(0,s._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-bash"},[(0,s.Uk)("app.asar\n└─ dist\n   └─ electron-*\n      ├─ js/"),(0,s._)("span",{class:"token punctuation"},".."),(0,s.Uk)(".\n      ├─ icons/\n      ├─ node_modules/\n      ├─ index.html\n      ├─ package.json\n      ├─ electron-main.js\n      ├─ electron-preload.js\n      └─ "),(0,s._)("span",{class:"token punctuation"},".."),(0,s.Uk)(".contents of /public\n")])],-1),c=(0,s._)("p",null,"使用Electron的一个很大的好处是能够访问用户的文件系统。这使你能够读取和写入本地系统的文件。为了帮助避免Chromium的限制和对你的应用程序的内部文件的写入，请确保使用electron的API，特别是app.getPath(name)函数。这个辅助方法可以得到系统目录的文件路径，如用户的桌面、系统临时文件等。",-1),l=(0,s._)("p",null,"我们可以使用userData目录，它是专门为我们的应用程序保留的，所以我们可以有信心其他程序或其他用户的互动不应该篡改这个文件空间。",-1),p=(0,s._)("pre",{class:"doc-code language-js"},[(0,s._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,s._)("span",{class:"token comment"},"//  Electron 主件或 Electron 预装件"),(0,s.Uk)("\n\n"),(0,s._)("span",{class:"token keyword"},"import"),(0,s.Uk)(" path "),(0,s._)("span",{class:"token keyword"},"from"),(0,s.Uk)(),(0,s._)("span",{class:"token string"},"'path'"),(0,s.Uk)("\n"),(0,s._)("span",{class:"token keyword"},"import"),(0,s.Uk)(),(0,s._)("span",{class:"token punctuation"},"{"),(0,s.Uk)(" app "),(0,s._)("span",{class:"token punctuation"},"}"),(0,s.Uk)(),(0,s._)("span",{class:"token keyword"},"from"),(0,s.Uk)(),(0,s._)("span",{class:"token string"},"'@electron/remote'"),(0,s.Uk)("\n\n"),(0,s._)("span",{class:"token keyword"},"const"),(0,s.Uk)(" filePath "),(0,s._)("span",{class:"token operator"},"="),(0,s.Uk)(" path"),(0,s._)("span",{class:"token punctuation"},"."),(0,s._)("span",{class:"token function"},"join"),(0,s._)("span",{class:"token punctuation"},"("),(0,s.Uk)("app"),(0,s._)("span",{class:"token punctuation"},"."),(0,s._)("span",{class:"token function"},"getPath"),(0,s._)("span",{class:"token punctuation"},"("),(0,s._)("span",{class:"token string"},"'userData'"),(0,s._)("span",{class:"token punctuation"},")"),(0,s._)("span",{class:"token punctuation"},","),(0,s.Uk)(),(0,s._)("span",{class:"token string"},"'/some.file'"),(0,s._)("span",{class:"token punctuation"},")"),(0,s.Uk)("\n")])],-1),r=(0,s._)("p",null,'如果由于某种原因，你有重要的文件存放在/public文件夹中，你也可以通过下面的代码来访问这些文件。要了解为什么你需要以这种方式访问它们，请阅读上面的 "使用__dirname & __filename "一节。',-1),i=(0,s._)("pre",{class:"doc-code language-js"},[(0,s._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,s._)("span",{class:"token comment"},"//  Electron 主件或 Electron 预装件"),(0,s.Uk)("\n\n"),(0,s._)("span",{class:"token keyword"},"import"),(0,s.Uk)(" path "),(0,s._)("span",{class:"token keyword"},"from"),(0,s.Uk)(),(0,s._)("span",{class:"token string"},"'path'"),(0,s.Uk)("\n\n"),(0,s._)("span",{class:"token keyword"},"const"),(0,s.Uk)(" publicFolder "),(0,s._)("span",{class:"token operator"},"="),(0,s.Uk)(" path"),(0,s._)("span",{class:"token punctuation"},"."),(0,s._)("span",{class:"token function"},"resolve"),(0,s._)("span",{class:"token punctuation"},"("),(0,s.Uk)("__dirname"),(0,s._)("span",{class:"token punctuation"},","),(0,s.Uk)(" process"),(0,s._)("span",{class:"token punctuation"},"."),(0,s.Uk)("env"),(0,s._)("span",{class:"token punctuation"},"."),(0,s._)("span",{class:"token constant"},"QUASAR_PUBLIC_FOLDER"),(0,s._)("span",{class:"token punctuation"},")"),(0,s.Uk)("\n")])],-1);function d(n,e,a,d,_,k){const u=(0,s.up)("doc-page");return(0,s.wg)(),(0,s.j4)(u,{"meta-title":d.metaTitle,title:"Electron 访问文件",nav:d.nav,toc:d.toc,"meta-desc":d.metaDesc},{default:(0,s.w5)((()=>[(0,s._)("h2",{id:"使用-dirname-与-filename",class:"doc-heading doc-h2",onClick:e[0]||(e[0]=n=>d.copyHeading("使用-dirname-与-filename"))},"使用 __dirname 与 __filename"),o,t,(0,s._)("h2",{id:"读取和写入本地文件",class:"doc-heading doc-h2",onClick:e[1]||(e[1]=n=>d.copyHeading("读取和写入本地文件"))},"读取和写入本地文件"),c,l,p,(0,s._)("h2",{id:"访问公共文件夹",class:"doc-heading doc-h2",onClick:e[2]||(e[2]=n=>d.copyHeading("访问公共文件夹"))},"访问公共文件夹"),r,i])),_:1},8,["meta-title","nav","toc","meta-desc"])}var _=a(17536);const k={name:"DocMarkdownPage",setup(){return{metaTitle:"Electron 访问文件",metaDesc:"如何在 Quasar 桌面应用程序中访问文件。",nav:[{name:"Electron 包",category:"开发 Electron 应用程序",path:"/quasar-cli/developing-electron-apps/electron-packages",dir:"left"},{name:"无框 Electron 窗",category:"开发 Electron 应用程序",path:"/quasar-cli/developing-electron-apps/frameless-electron-window",dir:"right"}],toc:[{id:"使用-dirname-与-filename",title:"使用 __dirname 与 __filename"},{id:"读取和写入本地文件",title:"读取和写入本地文件"},{id:"访问公共文件夹",title:"访问公共文件夹"}],copyHeading:_.Et}}};var u=a(74260);const m=(0,u.Z)(k,[["render",d]]),g=m}}]);