"use strict";(globalThis["webpackChunkquasar_dev"]=globalThis["webpackChunkquasar_dev"]||[]).push([[94245],{94245:(s,a,n)=>{n.r(a),n.d(a,{default:()=>L});var c=n(83673);const t=(0,c._)("p",null,[(0,c.Uk)("你会注意到在项目结构中我们有两个资产目录："),(0,c._)("code",{class:"doc-token"},"/public/"),(0,c.Uk)("和"),(0,c._)("code",{class:"doc-token"},"/src/assets/"),(0,c.Uk)("。它们之间有什么区别呢？有些是静态资产，而其他的是由构建系统处理和嵌入的。")],-1),o=(0,c._)("p",null,"所以让我们试着回答上面的问题。我们先说说使用常规资产，然后再看看静态资产有什么区别。",-1),e=(0,c._)("p",null,[(0,c.Uk)("在"),(0,c._)("code",{class:"doc-token"},"*.vue"),(0,c.Uk)("组件中，你所有的模板和CSS都会被"),(0,c._)("code",{class:"doc-token"},"vue-html-loader"),(0,c.Uk)("和"),(0,c._)("code",{class:"doc-token"},"css-loader"),(0,c.Uk)("解析，以寻找资产URL。例如，在"),(0,c._)("code",{class:"doc-token"},'<img src="./logo.png">'),(0,c.Uk)("和"),(0,c._)("code",{class:"doc-token"},"background: url(./logo.png)"),(0,c.Uk)('中，`"./logo.png "是一个相对资产路径，将被Webpack解析为模块依赖。')],-1),l=(0,c._)("p",null,[(0,c.Uk)("因为"),(0,c._)("code",{class:"doc-token"},"logo.png"),(0,c.Uk)("不是JavaScript，当被当作模块依赖时，我们需要使用"),(0,c._)("code",{class:"doc-token"},"url-loader"),(0,c.Uk)("和"),(0,c._)("code",{class:"doc-token"},"file-loader"),(0,c.Uk)("来处理它。 Quasar CLI 已经为你配置了这些webpack加载器，所以你基本上可以免费获得文件名指纹和有条件的base64内联等功能，同时能够使用相对/模块路径而不用担心部署问题。")],-1),p=(0,c._)("p",null,[(0,c.Uk)("由于这些资产在构建过程中可能被内联/复制/重命名，它们基本上是你源代码的一部分。这就是为什么建议将Webpack处理的资产放在"),(0,c._)("code",{class:"doc-token"},"/src/assets"),(0,c.Uk)("中，与其他源文件一起。事实上，你甚至不需要把它们全部放在"),(0,c._)("code",{class:"doc-token"},"/src/assets"),(0,c.Uk)("中：你可以根据使用它们的模块/组件来组织它们。例如，你可以把每个组件放在它自己的目录中，其静态资产就在旁边。")],-1),k=(0,c._)("p",null,[(0,c.Uk)("相对的URLs，例如"),(0,c._)("code",{class:"doc-token"},"./assets/logo.png"),(0,c.Uk)("将被解释为模块的依赖性。它们将被替换为基于你的Webpack输出配置的自动生成的URL。")],-1),u=(0,c._)("p",null,[(0,c.Uk)("以"),(0,c._)("code",{class:"doc-token"},"~"),(0,c.Uk)("为前缀的URL将被视为一个模块请求，类似于"),(0,c._)("code",{class:"doc-token"},"require('some-module/image.png')"),(0,c.Uk)("。如果你想利用Webpack的模块解析配置，你需要使用这个前缀。Quasar提供了"),(0,c._)("code",{class:"doc-token"},"assets"),(0,c.Uk)("Webpack别名，所以建议你像这样使用它。"),(0,c._)("code",{class:"doc-token"},'<img src="~assets/logo.png">'),(0,c.Uk)("。注意’assets’前面的’~’。")],-1),i=(0,c._)("p",null,[(0,c.Uk)("与根相关的URL(例如"),(0,c._)("code",{class:"doc-token"},"/logo.png"),(0,c.Uk)("–其中’/'是你的publicPath)或"),(0,c._)("code",{class:"doc-token"},"logo.png"),(0,c.Uk)("完全不被处理。这应该被放在"),(0,c._)("code",{class:"doc-token"},"public/"),(0,c.Uk)("中。这些根本不会被Webpack处理。statics文件夹会被简单地复制到可分发的文件夹中。")],-1),_=(0,c._)("p",null,"Quasar 在幕后有一些智能算法，确保无论你构建什么(SPA、PWA、 Cordova 、Electron)，你的静态文件都能被正确引用*当且仅当它们不使用相对路径。",-1),d=(0,c._)("pre",{class:"doc-code language-html"},[(0,c._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-html"},[(0,c._)("span",{class:"token comment"},"\x3c!-- Good! --\x3e"),(0,c.Uk)("\n"),(0,c._)("span",{class:"token tag"},[(0,c._)("span",{class:"token tag"},[(0,c._)("span",{class:"token punctuation"},"<"),(0,c.Uk)("img")]),(0,c.Uk)(),(0,c._)("span",{class:"token attr-name"},"src"),(0,c._)("span",{class:"token attr-value"},[(0,c._)("span",{class:"token punctuation attr-equals"},"="),(0,c._)("span",{class:"token punctuation"},'"'),(0,c.Uk)("logo.png"),(0,c._)("span",{class:"token punctuation"},'"')]),(0,c._)("span",{class:"token punctuation"},">")]),(0,c.Uk)("\n\n"),(0,c._)("span",{class:"token comment"},"\x3c!--\n  BAD! Works until you change vue router\n  mode (hash/history) or your public path.\n  Don't!\n--\x3e"),(0,c.Uk)("\n"),(0,c._)("span",{class:"token tag"},[(0,c._)("span",{class:"token tag"},[(0,c._)("span",{class:"token punctuation"},"<"),(0,c.Uk)("img")]),(0,c.Uk)(),(0,c._)("span",{class:"token attr-name"},"src"),(0,c._)("span",{class:"token attr-value"},[(0,c._)("span",{class:"token punctuation attr-equals"},"="),(0,c._)("span",{class:"token punctuation"},'"'),(0,c.Uk)("/logo.png"),(0,c._)("span",{class:"token punctuation"},'"')]),(0,c._)("span",{class:"token punctuation"},">")]),(0,c.Uk)("\n")])],-1),r=(0,c._)("div",{class:"doc-note doc-note--tip"},[(0,c._)("p",{class:"doc-note__title"},"Assets vs Statics"),(0,c._)("p",null,'assets "文件夹中的文件只有在你的Vue文件中有字面引用时才会被包含在你的构建中。 "public "文件夹中的每个文件和文件夹都会按原样复制到你的生产构建中，不管是什么。')],-1),U=(0,c._)("div",{class:"doc-note doc-note--danger"},[(0,c._)("p",{class:"doc-note__title"},"WARNING"),(0,c._)("p",null,[(0,c.Uk)("当不构建SPA/PWA/SSR时，"),(0,c._)("code",{class:"doc-token"},"/public/icons/*"),(0,c.Uk)("和"),(0,c._)("code",{class:"doc-token"},"/public/favicon.ico"),(0,c.Uk)("将不会被嵌入你的应用程序，因为它们没有任何作用。例如，Electron或 Cordova 应用程序就不需要这些文件。")])],-1),g=(0,c._)("p",null,'请注意，只要你将 "src "绑定到Vue作用域中的一个变量，它就必须是statics文件夹中的一个。原因很简单：URL是动态的，所以Webpack(在编译时打包资产)不知道你在运行时将引用哪个文件，所以它不会处理这个URL。',-1),m=(0,c._)("pre",{class:"doc-code language-html"},[(0,c._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-html"},[(0,c._)("span",{class:"token tag"},[(0,c._)("span",{class:"token tag"},[(0,c._)("span",{class:"token punctuation"},"<"),(0,c.Uk)("template")]),(0,c._)("span",{class:"token punctuation"},">")]),(0,c.Uk)("\n  "),(0,c._)("span",{class:"token comment"},"\x3c!-- imageSrc 必须引用来自 /public 的文件 --\x3e"),(0,c.Uk)("\n  "),(0,c._)("span",{class:"token tag"},[(0,c._)("span",{class:"token tag"},[(0,c._)("span",{class:"token punctuation"},"<"),(0,c.Uk)("img")]),(0,c.Uk)(),(0,c._)("span",{class:"token attr-name"},":src"),(0,c._)("span",{class:"token attr-value"},[(0,c._)("span",{class:"token punctuation attr-equals"},"="),(0,c._)("span",{class:"token punctuation"},'"'),(0,c.Uk)("imageSrc"),(0,c._)("span",{class:"token punctuation"},'"')]),(0,c._)("span",{class:"token punctuation"},">")]),(0,c.Uk)("\n"),(0,c._)("span",{class:"token tag"},[(0,c._)("span",{class:"token tag"},[(0,c._)("span",{class:"token punctuation"},"</"),(0,c.Uk)("template")]),(0,c._)("span",{class:"token punctuation"},">")]),(0,c.Uk)("\n\n"),(0,c._)("span",{class:"token tag"},[(0,c._)("span",{class:"token tag"},[(0,c._)("span",{class:"token punctuation"},"<"),(0,c.Uk)("script")]),(0,c._)("span",{class:"token punctuation"},">")]),(0,c._)("span",{class:"token script"},[(0,c._)("span",{class:"token language-javascript"},[(0,c.Uk)("\n"),(0,c._)("span",{class:"token keyword"},"export"),(0,c.Uk)(),(0,c._)("span",{class:"token keyword"},"default"),(0,c.Uk)(),(0,c._)("span",{class:"token punctuation"},"{"),(0,c.Uk)("\n  "),(0,c._)("span",{class:"token function"},"setup"),(0,c.Uk)(),(0,c._)("span",{class:"token punctuation"},"("),(0,c._)("span",{class:"token punctuation"},")"),(0,c.Uk)(),(0,c._)("span",{class:"token punctuation"},"{"),(0,c.Uk)("\n    "),(0,c._)("span",{class:"token keyword"},"return"),(0,c.Uk)(),(0,c._)("span",{class:"token punctuation"},"{"),(0,c.Uk)("\n      "),(0,c._)("span",{class:"token comment"},"/*\n        参考 /public。\n        请注意，字符串不是以斜杠开头的。(/)\n      */"),(0,c.Uk)("\n      "),(0,c._)("span",{class:"token literal-property property"},"imageSrc"),(0,c._)("span",{class:"token operator"},":"),(0,c.Uk)(),(0,c._)("span",{class:"token string"},"'logo.png'"),(0,c.Uk)("\n    "),(0,c._)("span",{class:"token punctuation"},"}"),(0,c.Uk)("\n  "),(0,c._)("span",{class:"token punctuation"},"}"),(0,c.Uk)("\n"),(0,c._)("span",{class:"token punctuation"},"}"),(0,c.Uk)("\n")])]),(0,c._)("span",{class:"token tag"},[(0,c._)("span",{class:"token tag"},[(0,c._)("span",{class:"token punctuation"},"</"),(0,c.Uk)("script")]),(0,c._)("span",{class:"token punctuation"},">")]),(0,c.Uk)("\n")])],-1),h=(0,c._)("p",null,[(0,c.Uk)("你可以通过将"),(0,c._)("code",{class:"doc-token"},"src"),(0,c.Uk)("绑定到Vue的一个值来强制服务静态资产。使用"),(0,c._)("code",{class:"doc-token"},':src="path/to/image "而不是'),(0,c.Uk)(':src=“path/to/image”"'),(0,c._)("code",{class:"doc-token"},"或"),(0,c.Uk)(":src=“imageSrc”。请注意第二个代码示例中双引号内单引号的用法(为了在文档网站上直观地看到这一点，已经添加了空格–通常情况下，你不会有空格)。")],-1),b=(0,c._)("p",null,[(0,c.Uk)("为了让Webpack返回正确的资产路径，你需要使用"),(0,c._)("code",{class:"doc-token"},"require('./relative/path/to/file.jpg')"),(0,c.Uk)("，它将被"),(0,c._)("code",{class:"doc-token"},"file-loader"),(0,c.Uk)("处理并返回解析后的URL。比如说。")],-1),v=(0,c._)("pre",{class:"doc-code language-js"},[(0,c._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,c._)("span",{class:"token literal-property property"},"computed"),(0,c._)("span",{class:"token operator"},":"),(0,c.Uk)(),(0,c._)("span",{class:"token punctuation"},"{"),(0,c.Uk)("\n  "),(0,c._)("span",{class:"token function"},"background"),(0,c.Uk)(),(0,c._)("span",{class:"token punctuation"},"("),(0,c._)("span",{class:"token punctuation"},")"),(0,c.Uk)(),(0,c._)("span",{class:"token punctuation"},"{"),(0,c.Uk)("\n    "),(0,c._)("span",{class:"token keyword"},"return"),(0,c.Uk)(),(0,c._)("span",{class:"token function"},"require"),(0,c._)("span",{class:"token punctuation"},"("),(0,c._)("span",{class:"token string"},"'./bgs/'"),(0,c.Uk)(),(0,c._)("span",{class:"token operator"},"+"),(0,c.Uk)(),(0,c._)("span",{class:"token keyword"},"this"),(0,c._)("span",{class:"token punctuation"},"."),(0,c.Uk)("id "),(0,c._)("span",{class:"token operator"},"+"),(0,c.Uk)(),(0,c._)("span",{class:"token string"},"'.jpg'"),(0,c._)("span",{class:"token punctuation"},")"),(0,c.Uk)("\n  "),(0,c._)("span",{class:"token punctuation"},"}"),(0,c.Uk)("\n"),(0,c._)("span",{class:"token punctuation"},"}"),(0,c.Uk)("\n")])],-1),y=(0,c._)("p",null,[(0,c.Uk)("请注意，上面的示例将在最终构建中包括"),(0,c._)("code",{class:"doc-token"},"./bgs/"),(0,c.Uk)("下的每一个图片。这是因为Webpack无法猜测哪些图片会在运行时被使用，所以它包括了所有图片。")],-1);function S(s,a,n,S,f,C){const W=(0,c.up)("doc-page");return(0,c.wg)(),(0,c.j4)(W,{"meta-title":S.metaTitle,title:"应用程序处理资产",nav:S.nav,toc:S.toc,"meta-desc":S.metaDesc},{default:(0,c.w5)((()=>[t,o,(0,c._)("h2",{id:"常规资产-src-assets",class:"doc-heading doc-h2",onClick:a[0]||(a[0]=s=>S.copyHeading("常规资产-src-assets"))},"常规资产 - /src/assets"),e,l,p,(0,c._)("h3",{id:"资产解析规则",class:"doc-heading doc-h3",onClick:a[1]||(a[1]=s=>S.copyHeading("资产解析规则"))},"资产解析规则"),k,u,(0,c._)("h2",{id:"静态资产-public",class:"doc-heading doc-h2",onClick:a[2]||(a[2]=s=>S.copyHeading("静态资产-public"))},"静态资产 - /public"),i,_,d,r,U,(0,c._)("h2",{id:"vue的绑定只需要statics",class:"doc-heading doc-h2",onClick:a[3]||(a[3]=s=>S.copyHeading("vue的绑定只需要statics"))},"Vue的绑定只需要statics"),g,m,h,(0,c._)("h2",{id:"在javascript中获取资产路径",class:"doc-heading doc-h2",onClick:a[4]||(a[4]=s=>S.copyHeading("在javascript中获取资产路径"))},"在JavaScript中获取资产路径"),b,v,y])),_:1},8,["meta-title","nav","toc","meta-desc"])}var f=n(17536);const C={name:"DocMarkdownPage",setup(){return{metaTitle:"应用程序处理资产",metaDesc:"如何在 Quasar 应用中使用常规应用资产和静态资产。",nav:[{name:"延迟加载 - 代码拆分",category:"Quasar CLI",path:"/quasar-cli/lazy-loading",dir:"left"},{name:"启动文件",category:"Quasar CLI",path:"/quasar-cli/boot-files",dir:"right"}],toc:[{id:"常规资产-src-assets",title:"常规资产 - /src/assets"},{id:"资产解析规则",title:"资产解析规则",sub:!0},{id:"静态资产-public",title:"静态资产 - /public"},{id:"vue的绑定只需要statics",title:"Vue的绑定只需要statics"},{id:"在javascript中获取资产路径",title:"在JavaScript中获取资产路径"}],copyHeading:f.Et}}};var W=n(74260);const w=(0,W.Z)(C,[["render",S]]),L=w}}]);