"use strict";(globalThis["webpackChunkquasar_dev"]=globalThis["webpackChunkquasar_dev"]||[]).push([[22630],{22630:(n,s,a)=>{a.r(s),a.d(s,{default:()=>B});var t=a(83673);const e=(0,t._)("code",{class:"doc-token"},"src-bex/js/background-hooks.js",-1),o=(0,t.Uk)(" is essentially a standard "),c=(0,t.Uk)("background script"),p=(0,t.Uk)(" and you are welcome to use it as such. Background scripts can communicate with "),u=(0,t._)("strong",null,"all",-1),k=(0,t.Uk)(" Web Pages, Dev Tools, Options and Popups running under your BEX."),l=(0,t._)("p",null,"The added benefit of this file is this function:",-1),i=(0,t._)("pre",{class:"doc-code language-js"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"attachBackgroundHooks"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("bridge"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" activeConnections")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])],-1),r=(0,t._)("p",null,"This function is called automatically via the Quasar BEX build chain and injects a bridge which is shared between all parts of the BEX meaning you can communicate with any part of your BEX.",-1),_=(0,t._)("p",null,[(0,t.Uk)("The "),(0,t._)("code",{class:"doc-token"},"bridge"),(0,t.Uk)(" param is the bridge to use for communication. The "),(0,t._)("code",{class:"doc-token"},"activeConnections"),(0,t.Uk)(" param provides an array of all the BEX connections registered via the bridge i.e All the Web Page, Options, Popup and Dev Tools BEX’s used by the same Quasar App.")],-1),d=(0,t._)("p",null,"For example, let’s say we want to listen for a new tab being opened in the web browser and then react to it in our Quasar App. First, we’d need to listen for the new tab being opened and emit a new event to tell the Quasar App this has happened:",-1),U=(0,t._)("pre",{class:"doc-code language-js"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,t.Uk)("chrome"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("tabs"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("onUpdated"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"addListener"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("tabId"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" changeInfo"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" tab")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  bridge"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"send"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'bex.tab.opened'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t._)("span",{class:"token literal-property property"},"url"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" tab"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("url "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n")])],-1),g=(0,t._)("p",null,"Then in our Quasar App, we’d listen for this in one of our component lifecycle hooks, like so:",-1),h=(0,t._)("pre",{class:"doc-code language-js"},[(0,t._)("code",{class:"doc-code__inner doc-code__inner--prerendered language-js"},[(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" useQuasar "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'quasar'"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" onBeforeUnmount "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'vue'"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"setup"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" $q "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"useQuasar"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token comment"},"// Our function which receives the URL sent by the background script."),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"doOnTabOpened"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"url"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      console"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"log"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'New Browser Tab Openend: '"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" url"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token comment"},"// Add our listener"),(0,t.Uk)("\n    $q"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("bex"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"on"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'bex.tab.opened'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" doOnTabOpened"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token comment"},"// Don't forget to clean it up"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"onBeforeUnmount"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      $q"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("bex"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"off"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'bex.tab.opened'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" doOnTabOpened"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])],-1),b=(0,t._)("p",null,"There are wide variety of events available to the browser extension background script - Google is your friend if you’re trying to do something in this area.",-1),m=(0,t._)("p",null,[(0,t.Uk)("What if you want to modify the underlying web page content in some way? That’s where we’d use "),(0,t._)("code",{class:"doc-token"},"content-hooks.js"),(0,t.Uk)(". Let’s look at that in the next section.")],-1);function f(n,s,a,f,w,y){const v=(0,t.up)("doc-link"),T=(0,t.up)("doc-page");return(0,t.wg)(),(0,t.j4)(T,{"meta-title":f.metaTitle,title:"Background Hooks","meta-desc":f.metaDesc},{default:(0,t.w5)((()=>[(0,t._)("p",null,[e,o,(0,t.Wm)(v,{to:"https://developer.chrome.com/extensions/background_pages"},{default:(0,t.w5)((()=>[c])),_:1}),p,u,k]),l,i,r,_,d,U,g,h,b,m])),_:1},8,["meta-title","meta-desc"])}var w=a(17536);const y={name:"DocMarkdownPage",setup(){return{metaTitle:"Background Hooks",metaDesc:"How to communicate using your background script with other parts of your Browser Extension (BEX).",copyHeading:w.Et}}};var v=a(74260);const T=(0,v.Z)(y,[["render",f]]),B=T}}]);